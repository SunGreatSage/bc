# æ¡†æ¶è¿ç§»å¼€å‘æ–‡æ¡£

> **é¡¹ç›®åç§°**ï¼šhoutai_nyedCc å½©ç¥¨åå°ç®¡ç†ç³»ç»Ÿ
> **è¿ç§»æ–¹å‘**ï¼šåŸç”Ÿ PHP â†’ ThinkPHP 6.x / Laravel 10.x
> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-11-09
> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0

---

## ç›®å½•

1. [è¿ç§»èƒŒæ™¯ä¸ç›®æ ‡](#è¿ç§»èƒŒæ™¯ä¸ç›®æ ‡)
2. [æ¡†æ¶é€‰å‹å¯¹æ¯”](#æ¡†æ¶é€‰å‹å¯¹æ¯”)
3. [ç°æœ‰ç³»ç»Ÿåˆ†æ](#ç°æœ‰ç³»ç»Ÿåˆ†æ)
4. [è¿ç§»ç­–ç•¥](#è¿ç§»ç­–ç•¥)
5. [æŠ€æœ¯æ¶æ„è®¾è®¡](#æŠ€æœ¯æ¶æ„è®¾è®¡)
6. [æ•°æ®å±‚é‡æ„ï¼ˆModelè®¾è®¡ï¼‰](#æ•°æ®å±‚é‡æ„modelè®¾è®¡)
7. [ä¸šåŠ¡å±‚é‡æ„ï¼ˆServiceå±‚ï¼‰](#ä¸šåŠ¡å±‚é‡æ„serviceå±‚)
8. [æ§åˆ¶å™¨å±‚é‡æ„](#æ§åˆ¶å™¨å±‚é‡æ„)
9. [è§†å›¾å±‚é€‚é…](#è§†å›¾å±‚é€‚é…)
10. [ä¸­é—´ä»¶è®¾è®¡](#ä¸­é—´ä»¶è®¾è®¡)
11. [è·¯ç”±è§„åˆ’](#è·¯ç”±è§„åˆ’)
12. [å¼€å‘é˜¶æ®µä¸å‘¨æœŸ](#å¼€å‘é˜¶æ®µä¸å‘¨æœŸ)
13. [é£é™©è¯„ä¼°ä¸åº”å¯¹](#é£é™©è¯„ä¼°ä¸åº”å¯¹)
14. [æµ‹è¯•æ–¹æ¡ˆ](#æµ‹è¯•æ–¹æ¡ˆ)
15. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
16. [éƒ¨ç½²æ–¹æ¡ˆ](#éƒ¨ç½²æ–¹æ¡ˆ)

---

## è¿ç§»èƒŒæ™¯ä¸ç›®æ ‡

### å½“å‰ç³»ç»Ÿç—›ç‚¹

| é—®é¢˜ç±»å‹ | å…·ä½“è¡¨ç° | å½±å“ç¨‹åº¦ |
|---------|---------|---------|
| **å®‰å…¨éšæ‚£** | SQL æ³¨å…¥é£é™©ã€MD5 å¯†ç ã€ç¼ºå°‘ CSRF é˜²æŠ¤ | âš ï¸ é«˜ |
| **ä»£ç è´¨é‡** | æ— æ³¨é‡Šã€å‡½æ•°è¿‡é•¿ã€é‡å¤ä»£ç å¤š | âš ï¸ é«˜ |
| **ç»´æŠ¤å›°éš¾** | æ— æ¡†æ¶çº¦æŸã€ä»£ç åˆ†æ•£ã€éš¾ä»¥è°ƒè¯• | âš ï¸ ä¸­ |
| **æ€§èƒ½ç“¶é¢ˆ** | æ— ç¼“å­˜æœºåˆ¶ã€æ…¢æŸ¥è¯¢å¤šã€å¹¶å‘èƒ½åŠ›å¼± | âš ï¸ ä¸­ |
| **æ‰©å±•æ€§å·®** | è€¦åˆåº¦é«˜ã€æ— æ¥å£è®¾è®¡ã€éš¾ä»¥æ·»åŠ æ–°åŠŸèƒ½ | âš ï¸ ä¸­ |
| **æµ‹è¯•ç¼ºå¤±** | æ— å•å…ƒæµ‹è¯•ã€æ— è‡ªåŠ¨åŒ–æµ‹è¯• | âš ï¸ ä½ |

### è¿ç§»ç›®æ ‡

âœ… **å®‰å…¨æ€§æå‡**ï¼š
- ä½¿ç”¨ ORM é¢„ç¼–è¯‘æŸ¥è¯¢ï¼Œå½»åº•æœç» SQL æ³¨å…¥
- å¯†ç ä½¿ç”¨ bcrypt/Argon2 åŠ å¯†
- å†…ç½® CSRF Token éªŒè¯
- ç»Ÿä¸€çš„æƒé™ç®¡ç†ï¼ˆRBACï¼‰

âœ… **ä»£ç è´¨é‡æå‡**ï¼š
- è§„èŒƒçš„ MVC æ¶æ„
- PSR-4 è‡ªåŠ¨åŠ è½½
- ä»£ç æ³¨é‡Šä¸æ–‡æ¡£
- ä¾èµ–æ³¨å…¥å®¹å™¨

âœ… **å¯ç»´æŠ¤æ€§æå‡**ï¼š
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- æ—¥å¿—ç³»ç»Ÿï¼ˆåˆ†çº§è®°å½•ï¼‰
- è°ƒè¯•å·¥å…·ï¼ˆDebug Barï¼‰
- ä»£ç è§„èŒƒæ£€æŸ¥ï¼ˆPHP-CS-Fixerï¼‰

âœ… **æ€§èƒ½æå‡**ï¼š
- é›†æˆ Redis ç¼“å­˜
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery Builder/ORMï¼‰
- é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ï¼ˆå¼€å¥–ã€æŠ¥è¡¨ï¼‰
- HTTP ç¼“å­˜æ§åˆ¶

âœ… **æ‰©å±•æ€§æå‡**ï¼š
- æœåŠ¡å®¹å™¨ä¸ä¾èµ–æ³¨å…¥
- äº‹ä»¶ç³»ç»Ÿ
- RESTful APIï¼ˆæ”¯æŒå‰åç«¯åˆ†ç¦»ï¼‰
- å¤šæ•°æ®åº“è¿æ¥æ”¯æŒ

---

## æ¡†æ¶é€‰å‹å¯¹æ¯”

### ThinkPHP 6.x vs Laravel 10.x

| å¯¹æ¯”ç»´åº¦ | ThinkPHP 6.x | Laravel 10.x | æ¨è |
|---------|-------------|-------------|-----|
| **å­¦ä¹ æ›²çº¿** | â­â­â­â­â­ ç®€å•ï¼ˆä¸­æ–‡æ–‡æ¡£ä¸°å¯Œï¼‰ | â­â­â­ ä¸­ç­‰ï¼ˆè‹±æ–‡ä¸ºä¸»ï¼‰ | ThinkPHP |
| **æ€§èƒ½** | â­â­â­â­ è¾ƒå¥½ï¼ˆè½»é‡çº§ï¼‰ | â­â­â­ ä¸­ç­‰ï¼ˆåŠŸèƒ½å¤šï¼Œå¼€é”€å¤§ï¼‰ | ThinkPHP |
| **ç”Ÿæ€** | â­â­â­ ä¸­ç­‰ï¼ˆå›½å†…æµè¡Œï¼‰ | â­â­â­â­â­ ä¸°å¯Œï¼ˆå›½é™…é€šç”¨ï¼‰ | Laravel |
| **ORM** | Think-ORMï¼ˆç®€å•ç›´è§‚ï¼‰ | Eloquentï¼ˆåŠŸèƒ½å¼ºå¤§ï¼‰ | Laravel |
| **ç¤¾åŒº** | â­â­â­â­ æ´»è·ƒï¼ˆä¸­æ–‡ç¤¾åŒºï¼‰ | â­â­â­â­â­ éå¸¸æ´»è·ƒ | Laravel |
| **æ¨¡æ¿å¼•æ“** | Think-Template | Bladeï¼ˆä¼˜é›…ç®€æ´ï¼‰ | Laravel |
| **API å¼€å‘** | â­â­â­ éœ€è¦æ‰©å±• | â­â­â­â­â­ åŸç”Ÿæ”¯æŒ | Laravel |
| **é˜Ÿåˆ—** | â­â­â­â­ å†…ç½® | â­â­â­â­â­ åŠŸèƒ½å¼ºå¤§ | Laravel |
| **æµ‹è¯•** | â­â­â­ PHPUnit é›†æˆ | â­â­â­â­â­ å®Œå–„çš„æµ‹è¯•å·¥å…· | Laravel |
| **æ–‡æ¡£** | â­â­â­â­ ä¸­æ–‡å®Œå–„ | â­â­â­â­â­ è¯¦å°½å…¨é¢ | å„æœ‰ä¼˜åŠ¿ |
| **é€‚ç”¨åœºæ™¯** | ä¸­å°å‹é¡¹ç›®ã€å›½å†…ä¸šåŠ¡ | ä¸­å¤§å‹é¡¹ç›®ã€å›½é™…åŒ– | è§†éœ€æ±‚è€Œå®š |

### ç»¼åˆæ¨èï¼š**Laravel 10.x**

**ç†ç”±**ï¼š

1. âœ… **Eloquent ORM å¼ºå¤§**ï¼šæ”¯æŒå…³è”æŸ¥è¯¢ã€é¢„åŠ è½½ã€æ¨¡å‹äº‹ä»¶ï¼Œå®Œç¾æ›¿ä»£åŸç”Ÿ SQL
2. âœ… **Blade æ¨¡æ¿å¼•æ“**ï¼šå¯ä»¥å¤ç”¨ç°æœ‰ Smarty HTML ç»“æ„ï¼Œè¿ç§»æˆæœ¬ä½
3. âœ… **é˜Ÿåˆ—ç³»ç»Ÿå®Œå–„**ï¼šå¼€å¥–ã€æŠ¥è¡¨ç­‰è€—æ—¶ä»»åŠ¡å¯å¼‚æ­¥å¤„ç†
4. âœ… **API èµ„æºä¸°å¯Œ**ï¼šæœªæ¥å¯æ‰©å±•ä¸ºå‰åç«¯åˆ†ç¦»æ¶æ„
5. âœ… **å®‰å…¨æ€§æ›´é«˜**ï¼šå†…ç½® CSRFã€SQL æ³¨å…¥ã€XSS é˜²æŠ¤
6. âœ… **å›½é™…åŒ–æ”¯æŒ**ï¼šå¦‚éœ€æµ·å¤–éƒ¨ç½²ï¼ŒLaravel æ›´å‹å¥½
7. âœ… **é•¿æœŸç»´æŠ¤**ï¼šLaravel ç‰ˆæœ¬æ›´æ–°å¿«ï¼Œé•¿æœŸæŠ€æœ¯æ”¯æŒ

**å¤‡é€‰æ–¹æ¡ˆ**ï¼šå¦‚æœå›¢é˜Ÿå¯¹ ThinkPHP æ›´ç†Ÿæ‚‰ï¼Œä¹Ÿå¯é€‰æ‹© ThinkPHP 6.xï¼ˆè¿ç§»æˆæœ¬æ›´ä½ï¼‰

---

## ç°æœ‰ç³»ç»Ÿåˆ†æ

### ä»£ç ç»“æ„ç»Ÿè®¡

é€šè¿‡å¯¹ç°æœ‰é¡¹ç›®çš„åˆ†æï¼Œå¾—å‡ºä»¥ä¸‹æ•°æ®ï¼š

| æ¨¡å— | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•°ï¼ˆä¼°ç®—ï¼‰ | SQL æŸ¥è¯¢æ•° | ä¸»è¦åŠŸèƒ½ |
|-----|--------|----------------|-----------|---------|
| `hide/` | 50+ | 15,000+ | 500+ | ç®¡ç†å‘˜åå° |
| `agent/` | 40+ | 10,000+ | 300+ | ä»£ç†åå° |
| `uxj/` | 30+ | 8,000+ | 200+ | PC ç”¨æˆ·å‰å° |
| `mxj/` | 25+ | 6,000+ | 150+ | ç§»åŠ¨ç«¯å‰å° |
| `func/` | 10+ | 5,000+ | - | ä¸šåŠ¡å‡½æ•°åº“ |
| `global/` | 8+ | 3,000+ | - | å·¥å…·ç±»åº“ |
| `data/` | 5+ | 500+ | - | é…ç½®æ–‡ä»¶ |
| **æ€»è®¡** | **168+** | **47,500+** | **1,150+** | - |

### æ•°æ®è¡¨ç»Ÿè®¡

| è¡¨å | ä¸­æ–‡åç§° | è®°å½•æ•°ï¼ˆä¼°ç®—ï¼‰ | å…³è”å…³ç³» | è¿ç§»ä¼˜å…ˆçº§ |
|-----|---------|--------------|---------|-----------|
| `x_user` | ç”¨æˆ·è¡¨ | 10,000+ | æ ¸å¿ƒè¡¨ | P0 |
| `x_lib` | æŠ•æ³¨è®°å½•è¡¨ | 1,000,000+ | æ ¸å¿ƒè¡¨ | P0 |
| `x_kj` | å¼€å¥–è®°å½•è¡¨ | 10,000+ | æ ¸å¿ƒè¡¨ | P0 |
| `x_admins` | ç®¡ç†å‘˜è¡¨ | 100+ | æ ¸å¿ƒè¡¨ | P0 |
| `x_agent` | ä»£ç†è¡¨ | 1,000+ | æ ¸å¿ƒè¡¨ | P0 |
| `x_game` | æ¸¸æˆé…ç½®è¡¨ | 50+ | é…ç½®è¡¨ | P1 |
| `x_class` | ç©æ³•åˆ†ç±»è¡¨ | 200+ | é…ç½®è¡¨ | P1 |
| `x_play` | ç©æ³•èµ”ç‡è¡¨ | 500+ | é…ç½®è¡¨ | P1 |
| `x_config` | ç³»ç»Ÿé…ç½®è¡¨ | 1 | é…ç½®è¡¨ | P1 |
| `x_money_log` | èµ„é‡‘æµæ°´è¡¨ | 500,000+ | æµæ°´è¡¨ | P1 |
| `x_points` | ç§¯åˆ†è¡¨ | 10,000+ | è¾…åŠ©è¡¨ | P2 |
| `x_web` | ç«™ç‚¹é…ç½®è¡¨ | 10+ | è¾…åŠ©è¡¨ | P2 |
| **æ€»è®¡** | **40+ å¼ è¡¨** | **~1,500,000+** | - | - |

### SQL æŸ¥è¯¢ç±»å‹åˆ†æ

é€šè¿‡æ‰«æä»£ç ï¼Œå‘ç°ä»¥ä¸‹ SQL æŸ¥è¯¢æ¨¡å¼ï¼š

```php
// æ¨¡å¼1ï¼šç›´æ¥å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆé«˜é£é™©ï¼Œå æ¯” 60%ï¼‰
$sql = "SELECT * FROM `$tb_user` WHERE userid='$userid'";
$msql->query($sql);

// æ¨¡å¼2ï¼šå¸¦ç®€å•è¿‡æ»¤ï¼ˆä¸­é£é™©ï¼Œå æ¯” 30%ï¼‰
$userid = acreplace($_GET['userid']);
$sql = "SELECT * FROM `$tb_user` WHERE userid='$userid'";

// æ¨¡å¼3ï¼šä½¿ç”¨é¢„å¤„ç†ï¼ˆä½é£é™©ï¼Œå æ¯” 10%ï¼‰
$sql = "SELECT * FROM `$tb_user` WHERE userid=?";
$msql->prepare($sql, [$userid]);
```

**è¿ç§»ç›®æ ‡**ï¼š100% ä½¿ç”¨ ORM/Query Builderï¼Œå½»åº•æ¶ˆé™¤ SQL æ³¨å…¥é£é™©ã€‚

### ç°æœ‰ä»£ç ç¤ºä¾‹ï¼ˆéœ€è¦é‡æ„ï¼‰

**åŸä»£ç ï¼ˆhide/suser.phpï¼‰**ï¼š

```php
<?php
include('../data/comm.inc.php');
include('../func/func.php');

$userid = $_GET['userid'];
$sql = "SELECT * FROM `$tb_user` WHERE userid='$userid'";
$msql->query($sql);
$msql->next_record();
$username = $msql->f('username');
$points = $msql->f('points');

echo "ç”¨æˆ·åï¼š$usernameï¼Œä½™é¢ï¼š$points";
?>
```

**é‡æ„åï¼ˆLaravelï¼‰**ï¼š

```php
<?php
namespace App\Http\Controllers\Admin;

use App\Models\User;
use Illuminate\Http\Request;

class UserController extends Controller
{
    public function show(Request $request)
    {
        // è‡ªåŠ¨éªŒè¯ + ORM æŸ¥è¯¢
        $user = User::findOrFail($request->userid);

        return view('admin.user.show', [
            'username' => $user->username,
            'points' => $user->points
        ]);
    }
}
?>
```

---

## è¿ç§»ç­–ç•¥

### æ€»ä½“åŸåˆ™

1. **æ¸è¿›å¼è¿ç§»**ï¼šæŒ‰æ¨¡å—é€æ­¥è¿ç§»ï¼Œè€Œéä¸€æ¬¡æ€§é‡å†™
2. **æ•°æ®å±‚ä¼˜å…ˆ**ï¼šå…ˆé‡æ„ Modelï¼Œå†é‡æ„ Controller
3. **ä¿ç•™å‰ç«¯**ï¼šåˆæœŸä¿ç•™ Smarty æ¨¡æ¿ï¼ŒåæœŸå†è€ƒè™‘ Blade
4. **åŒç³»ç»Ÿå¹¶è¡Œ**ï¼šè¿ç§»æœŸé—´æ–°æ—§ç³»ç»ŸåŒæ—¶è¿è¡Œï¼Œæ•°æ®åŒæ­¥
5. **å¢é‡ä¸Šçº¿**ï¼šé€æ¨¡å—ä¸Šçº¿ï¼Œé™ä½é£é™©

### è¿ç§»è·¯å¾„

```
é˜¶æ®µ1ï¼šç¯å¢ƒæ­å»º + Model å±‚è¿ç§»ï¼ˆ2å‘¨ï¼‰
    â†“
é˜¶æ®µ2ï¼šæ ¸å¿ƒä¸šåŠ¡è¿ç§»ï¼ˆç®¡ç†å‘˜åå°ï¼‰ï¼ˆ4å‘¨ï¼‰
    â†“
é˜¶æ®µ3ï¼šä»£ç†åå°è¿ç§»ï¼ˆ3å‘¨ï¼‰
    â†“
é˜¶æ®µ4ï¼šç”¨æˆ·å‰å°è¿ç§»ï¼ˆPC + ç§»åŠ¨ç«¯ï¼‰ï¼ˆ4å‘¨ï¼‰
    â†“
é˜¶æ®µ5ï¼šAPI æ¥å£å°è£…ï¼ˆ2å‘¨ï¼‰
    â†“
é˜¶æ®µ6ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ3å‘¨ï¼‰
    â†“
é˜¶æ®µ7ï¼šå…¨é‡ä¸Šçº¿ä¸ç›‘æ§ï¼ˆ1å‘¨ï¼‰
    â†“
æ€»è®¡ï¼š19å‘¨ï¼ˆçº¦ 4.5 ä¸ªæœˆï¼‰
```

### æ•°æ®è¿ç§»ç­–ç•¥

**æ–¹æ¡ˆAï¼šåŒå†™æ¨¡å¼**ï¼ˆæ¨èï¼‰

```
ç”¨æˆ·æ“ä½œ â†’ æ–°ç³»ç»Ÿï¼ˆLaravelï¼‰â†’ å†™å…¥æ•°æ®åº“
                  â†“
           åŒæ­¥åˆ°æ—§ç³»ç»Ÿï¼ˆåŸç”ŸPHPï¼‰
```

- âœ… ä¼˜ç‚¹ï¼šå¯éšæ—¶å›æ»šï¼Œé£é™©ä½
- âš ï¸ ç¼ºç‚¹ï¼šéœ€è¦ç»´æŠ¤ä¸¤å¥—ä»£ç 

**æ–¹æ¡ˆBï¼šä¸€æ¬¡æ€§åˆ‡æ¢**

```
æ—§ç³»ç»Ÿåœæœº â†’ æ•°æ®æ¸…æ´— â†’ æ–°ç³»ç»Ÿä¸Šçº¿
```

- âœ… ä¼˜ç‚¹ï¼šåˆ‡æ¢å¹²å‡€ï¼Œæ— éœ€ç»´æŠ¤åŒç³»ç»Ÿ
- âš ï¸ ç¼ºç‚¹ï¼šé£é™©é«˜ï¼Œéœ€è¦é•¿æ—¶é—´åœæœº

**æ¨è**ï¼šä½¿ç”¨**æ–¹æ¡ˆA**ï¼Œæ¯ä¸ªæ¨¡å—è¿ç§»å®Œæˆåé€æ­¥åˆ‡æ¢æµé‡ã€‚

---

## æŠ€æœ¯æ¶æ„è®¾è®¡

### Laravel é¡¹ç›®ç»“æ„

```
lottery-admin/  (æ–°é¡¹ç›®æ ¹ç›®å½•)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Console/                # å®šæ—¶ä»»åŠ¡ï¼ˆå¼€å¥–ã€é‡‡é›†ï¼‰
â”‚   â”œâ”€â”€ Exceptions/             # å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â”œâ”€â”€ Controllers/        # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Admin/         # ç®¡ç†å‘˜åå°
â”‚   â”‚   â”‚   â”œâ”€â”€ Agent/         # ä»£ç†åå°
â”‚   â”‚   â”‚   â”œâ”€â”€ User/          # ç”¨æˆ·å‰å°
â”‚   â”‚   â”‚   â””â”€â”€ Api/           # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ Middleware/         # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ Requests/           # è¡¨å•éªŒè¯
â”‚   â”‚   â””â”€â”€ Resources/          # API èµ„æº
â”‚   â”œâ”€â”€ Models/                 # Eloquent æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.php
â”‚   â”‚   â”œâ”€â”€ Bet.php            # æŠ•æ³¨è®°å½•
â”‚   â”‚   â”œâ”€â”€ Lottery.php        # å¼€å¥–è®°å½•
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ BetService.php     # æŠ•æ³¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ LotteryService.php # å¼€å¥–æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SettlementService.php # ç»“ç®—æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Repositories/           # æ•°æ®ä»“å‚¨å±‚ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ Helpers/                # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ bootstrap/
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.php
â”‚   â”œâ”€â”€ queue.php
â”‚   â””â”€â”€ lottery.php            # è‡ªå®šä¹‰å½©ç¥¨é…ç½®
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/             # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ seeders/                # æ•°æ®å¡«å……
â”‚   â””â”€â”€ factories/              # æ¨¡å‹å·¥å‚
â”œâ”€â”€ public/                     # å…¬å…±èµ„æºï¼ˆCSSã€JSï¼‰
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ views/                  # Blade æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†å‘˜è§†å›¾
â”‚   â”‚   â”œâ”€â”€ agent/             # ä»£ç†è§†å›¾
â”‚   â”‚   â””â”€â”€ user/              # ç”¨æˆ·è§†å›¾
â”‚   â””â”€â”€ lang/                   # å¤šè¯­è¨€
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ web.php                 # Web è·¯ç”±
â”‚   â”œâ”€â”€ api.php                 # API è·¯ç”±
â”‚   â””â”€â”€ admin.php               # åå°è·¯ç”±ï¼ˆè‡ªå®šä¹‰ï¼‰
â”œâ”€â”€ storage/
â”‚   â”œâ”€â”€ logs/                   # æ—¥å¿—
â”‚   â””â”€â”€ framework/              # ç¼“å­˜ã€Session
â”œâ”€â”€ tests/                      # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ Feature/                # åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ Unit/                   # å•å…ƒæµ‹è¯•
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡
â”œâ”€â”€ composer.json
â””â”€â”€ artisan                     # å‘½ä»¤è¡Œå·¥å…·
```

### ç›®å½•å¯¹åº”å…³ç³»

| åŸé¡¹ç›®ç›®å½• | Laravel å¯¹åº”ç›®å½• | è¯´æ˜ |
|-----------|-----------------|------|
| `hide/*.php` | `app/Http/Controllers/Admin/` | ç®¡ç†å‘˜æ§åˆ¶å™¨ |
| `agent/*.php` | `app/Http/Controllers/Agent/` | ä»£ç†æ§åˆ¶å™¨ |
| `uxj/*.php` | `app/Http/Controllers/User/` | ç”¨æˆ·æ§åˆ¶å™¨ |
| `func/*.php` | `app/Services/` | ä¸šåŠ¡æœåŠ¡å±‚ |
| `global/*.php` | `app/Helpers/` æˆ– Composer åŒ… | å·¥å…·ç±» |
| `data/*.php` | `config/` | é…ç½®æ–‡ä»¶ |
| `templates/` | `resources/views/` | è§†å›¾æ¨¡æ¿ |
| `tools/*.php` | `app/Console/Commands/` | å®šæ—¶ä»»åŠ¡ |

---

## æ•°æ®å±‚é‡æ„ï¼ˆModelè®¾è®¡ï¼‰

### Model å‘½åè§„èŒƒ

Laravel ä½¿ç”¨**å•æ•°é©¼å³°å‘½å**ï¼Œæ•°æ®è¡¨ä½¿ç”¨**å¤æ•°ä¸‹åˆ’çº¿å‘½å**ï¼š

| åŸè¡¨å | æ–°è¡¨åï¼ˆå¯é€‰ï¼‰ | Model ç±»å | è¯´æ˜ |
|-------|--------------|-----------|------|
| `x_user` | `users` | `User` | ç”¨æˆ·æ¨¡å‹ |
| `x_lib` | `bets` | `Bet` | æŠ•æ³¨è®°å½• |
| `x_kj` | `lotteries` | `Lottery` | å¼€å¥–è®°å½• |
| `x_admins` | `admins` | `Admin` | ç®¡ç†å‘˜ |
| `x_agent` | `agents` | `Agent` | ä»£ç† |
| `x_game` | `games` | `Game` | æ¸¸æˆé…ç½® |
| `x_class` | `play_categories` | `PlayCategory` | ç©æ³•åˆ†ç±» |
| `x_play` | `plays` | `Play` | ç©æ³•èµ”ç‡ |
| `x_money_log` | `money_logs` | `MoneyLog` | èµ„é‡‘æµæ°´ |

**æ³¨æ„**ï¼š
- å¦‚æœä¸æƒ³æ”¹è¡¨åï¼Œå¯åœ¨ Model ä¸­æŒ‡å®š `protected $table = 'x_user';`
- æ¨è**ä¿ç•™åŸè¡¨å**ï¼Œé™ä½è¿ç§»é£é™©

### æ ¸å¿ƒ Model ç¤ºä¾‹

#### 1. User Modelï¼ˆç”¨æˆ·æ¨¡å‹ï¼‰

```php
<?php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Database\Eloquent\SoftDeletes;

class User extends Authenticatable
{
    use SoftDeletes; // è½¯åˆ é™¤

    protected $table = 'x_user'; // æŒ‡å®šè¡¨å

    protected $primaryKey = 'userid'; // ä¸»é”®ï¼ˆé»˜è®¤ idï¼‰

    public $timestamps = false; // ä¸ä½¿ç”¨ created_at/updated_at

    protected $fillable = [
        'username',
        'password',
        'points',
        'agentid',
        'status',
        'email',
        'phone'
    ];

    protected $hidden = [
        'password', // éšè—å¯†ç å­—æ®µ
        'moneypass' // éšè—èµ„é‡‘å¯†ç 
    ];

    protected $casts = [
        'points' => 'decimal:2',
        'status' => 'integer',
        'created_at' => 'datetime'
    ];

    // å…³è”ï¼šç”¨æˆ· â†’ ä»£ç†ï¼ˆå¤šå¯¹ä¸€ï¼‰
    public function agent()
    {
        return $this->belongsTo(Agent::class, 'agentid', 'agentid');
    }

    // å…³è”ï¼šç”¨æˆ· â†’ æŠ•æ³¨è®°å½•ï¼ˆä¸€å¯¹å¤šï¼‰
    public function bets()
    {
        return $this->hasMany(Bet::class, 'userid', 'userid');
    }

    // å…³è”ï¼šç”¨æˆ· â†’ èµ„é‡‘æµæ°´ï¼ˆä¸€å¯¹å¤šï¼‰
    public function moneyLogs()
    {
        return $this->hasMany(MoneyLog::class, 'userid', 'userid');
    }

    // è®¿é—®å™¨ï¼šæ ¼å¼åŒ–ä½™é¢
    public function getFormattedPointsAttribute()
    {
        return number_format($this->points, 2);
    }

    // ä¿®æ”¹å™¨ï¼šå¯†ç è‡ªåŠ¨åŠ å¯†
    public function setPasswordAttribute($value)
    {
        $this->attributes['password'] = bcrypt($value);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šæ´»è·ƒç”¨æˆ·
    public function scopeActive($query)
    {
        return $query->where('status', 0);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šæŒ‰ä»£ç†ç­›é€‰
    public function scopeByAgent($query, $agentid)
    {
        return $query->where('agentid', $agentid);
    }
}
```

#### 2. Bet Modelï¼ˆæŠ•æ³¨è®°å½•æ¨¡å‹ï¼‰

```php
<?php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Bet extends Model
{
    protected $table = 'x_lib';

    protected $primaryKey = 'tid';

    public $incrementing = false; // éè‡ªå¢ä¸»é”®

    protected $keyType = 'string'; // å­—ç¬¦ä¸²ä¸»é”®

    public $timestamps = false;

    protected $fillable = [
        'tid',
        'userid',
        'gid',
        'qishu',
        'class',
        'pid',
        'nlist',
        'points',
        'peilv',
        'prize',
        'z',
        'dates'
    ];

    protected $casts = [
        'points' => 'decimal:2',
        'peilv' => 'decimal:2',
        'prize' => 'decimal:2',
        'z' => 'integer',
        'dates' => 'datetime'
    ];

    // å…³è”ï¼šæŠ•æ³¨ â†’ ç”¨æˆ·
    public function user()
    {
        return $this->belongsTo(User::class, 'userid', 'userid');
    }

    // å…³è”ï¼šæŠ•æ³¨ â†’ æ¸¸æˆ
    public function game()
    {
        return $this->belongsTo(Game::class, 'gid', 'gid');
    }

    // å…³è”ï¼šæŠ•æ³¨ â†’ æœŸå·
    public function lottery()
    {
        return $this->belongsTo(Lottery::class, 'qishu', 'qishu');
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šæœªå¼€å¥–
    public function scopeUnopened($query)
    {
        return $query->where('z', 0);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šå·²å¼€å¥–
    public function scopeOpened($query)
    {
        return $query->where('z', 1);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šå·²ä¸­å¥–
    public function scopeWon($query)
    {
        return $query->where('z', 1)->where('prize', '>', 0);
    }

    // è®¿é—®å™¨ï¼šæŠ•æ³¨å·ç æ•°ç»„
    public function getNumbersAttribute()
    {
        return explode(',', $this->nlist);
    }

    // è®¿é—®å™¨ï¼šæ˜¯å¦ä¸­å¥–
    public function getIsWonAttribute()
    {
        return $this->z == 1 && $this->prize > 0;
    }
}
```

#### 3. Lottery Modelï¼ˆå¼€å¥–è®°å½•æ¨¡å‹ï¼‰

```php
<?php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Lottery extends Model
{
    protected $table = 'x_kj';

    protected $primaryKey = 'id';

    public $timestamps = false;

    protected $fillable = [
        'gid',
        'qishu',
        'kjtime',
        'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7',
        'z',
        'dates'
    ];

    protected $casts = [
        'kjtime' => 'datetime',
        'z' => 'integer',
        'dates' => 'datetime'
    ];

    // å…³è”ï¼šå¼€å¥– â†’ æ¸¸æˆ
    public function game()
    {
        return $this->belongsTo(Game::class, 'gid', 'gid');
    }

    // å…³è”ï¼šå¼€å¥– â†’ æŠ•æ³¨è®°å½•
    public function bets()
    {
        return $this->hasMany(Bet::class, 'qishu', 'qishu');
    }

    // è®¿é—®å™¨ï¼šå¼€å¥–å·ç æ•°ç»„
    public function getNumbersAttribute()
    {
        return [
            $this->m1, $this->m2, $this->m3,
            $this->m4, $this->m5, $this->m6, $this->m7
        ];
    }

    // è®¿é—®å™¨ï¼šç‰¹ç ï¼ˆæœ€åä¸€ä¸ªå·ç ï¼‰
    public function getTemaAttribute()
    {
        return $this->m7;
    }

    // è®¿é—®å™¨ï¼šæ­£ç ï¼ˆå‰6ä¸ªå·ç ï¼‰
    public function getZhengmaAttribute()
    {
        return [$this->m1, $this->m2, $this->m3, $this->m4, $this->m5, $this->m6];
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šå·²å¼€å¥–
    public function scopeOpened($query)
    {
        return $query->where('z', 1);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šæœªå¼€å¥–
    public function scopeUnopened($query)
    {
        return $query->where('z', 0);
    }

    // æœ¬åœ°ä½œç”¨åŸŸï¼šæŒ‰æ¸¸æˆç­›é€‰
    public function scopeByGame($query, $gid)
    {
        return $query->where('gid', $gid);
    }
}
```

### Model å…³ç³»å›¾

```
Userï¼ˆç”¨æˆ·ï¼‰
  â”œâ”€â”€ belongsTo: Agentï¼ˆä»£ç†ï¼‰
  â”œâ”€â”€ hasMany: Betï¼ˆæŠ•æ³¨è®°å½•ï¼‰
  â””â”€â”€ hasMany: MoneyLogï¼ˆèµ„é‡‘æµæ°´ï¼‰

Betï¼ˆæŠ•æ³¨è®°å½•ï¼‰
  â”œâ”€â”€ belongsTo: Userï¼ˆç”¨æˆ·ï¼‰
  â”œâ”€â”€ belongsTo: Gameï¼ˆæ¸¸æˆï¼‰
  â”œâ”€â”€ belongsTo: Lotteryï¼ˆæœŸå·ï¼‰
  â””â”€â”€ belongsTo: Playï¼ˆç©æ³•ï¼‰

Lotteryï¼ˆå¼€å¥–è®°å½•ï¼‰
  â”œâ”€â”€ belongsTo: Gameï¼ˆæ¸¸æˆï¼‰
  â””â”€â”€ hasMany: Betï¼ˆæŠ•æ³¨è®°å½•ï¼‰

Gameï¼ˆæ¸¸æˆï¼‰
  â”œâ”€â”€ hasMany: Lotteryï¼ˆå¼€å¥–è®°å½•ï¼‰
  â”œâ”€â”€ hasMany: Betï¼ˆæŠ•æ³¨è®°å½•ï¼‰
  â””â”€â”€ hasMany: PlayCategoryï¼ˆç©æ³•åˆ†ç±»ï¼‰

Agentï¼ˆä»£ç†ï¼‰
  â”œâ”€â”€ hasMany: Userï¼ˆç”¨æˆ·ï¼‰
  â””â”€â”€ belongsTo: Agentï¼ˆä¸Šçº§ä»£ç†ï¼Œè‡ªå…³è”ï¼‰

Adminï¼ˆç®¡ç†å‘˜ï¼‰
  â””â”€â”€ hasMany: AdminLogï¼ˆæ“ä½œæ—¥å¿—ï¼‰
```

---

## ä¸šåŠ¡å±‚é‡æ„ï¼ˆServiceå±‚ï¼‰

### Service å±‚èŒè´£

å°†åŸ `func/` ç›®å½•ä¸‹çš„ä¸šåŠ¡å‡½æ•°å°è£…ä¸º Service ç±»ï¼š

| åŸå‡½æ•°æ–‡ä»¶ | Service ç±»å | ä¸»è¦æ–¹æ³• |
|-----------|------------|---------|
| `func.php` | `CommonService` | `generateOrderId()`, `formatDate()` |
| `csfunc.php` | `GameService` | `getGameConfig()`, `getPlays()` |
| `malhc.php` | `LotteryCalculateService` | `calculateWin()`, `getShengxiao()` |
| `userfunc.php` | `UserService` | `register()`, `login()`, `updateBalance()` |
| `adminfunc.php` | `AdminService` | `adjustOdds()`, `flyOrder()` |

### Service ç¤ºä¾‹

#### 1. BetServiceï¼ˆæŠ•æ³¨æœåŠ¡ï¼‰

```php
<?php
namespace App\Services;

use App\Models\Bet;
use App\Models\User;
use App\Models\Lottery;
use App\Models\Play;
use Illuminate\Support\Facades\DB;
use Exception;

class BetService
{
    /**
     * ç”¨æˆ·ä¸‹æ³¨
     *
     * @param int $userid ç”¨æˆ·ID
     * @param int $gid æ¸¸æˆID
     * @param string $qishu æœŸå·
     * @param int $pid ç©æ³•ID
     * @param array $numbers æŠ•æ³¨å·ç 
     * @param float $points æŠ•æ³¨é‡‘é¢
     * @return Bet
     * @throws Exception
     */
    public function placeBet($userid, $gid, $qishu, $pid, $numbers, $points)
    {
        return DB::transaction(function () use ($userid, $gid, $qishu, $pid, $numbers, $points) {

            // 1. éªŒè¯ç”¨æˆ·ä½™é¢
            $user = User::lockForUpdate()->findOrFail($userid);
            if ($user->points < $points) {
                throw new Exception('ä½™é¢ä¸è¶³');
            }

            // 2. éªŒè¯æœŸå·çŠ¶æ€
            $lottery = Lottery::where('gid', $gid)
                ->where('qishu', $qishu)
                ->where('z', 0) // æœªå¼€å¥–
                ->first();

            if (!$lottery) {
                throw new Exception('è¯¥æœŸå·²å°ç›˜æˆ–ä¸å­˜åœ¨');
            }

            // 3. è·å–èµ”ç‡
            $play = Play::where('gid', $gid)
                ->where('pid', $pid)
                ->first();

            if (!$play) {
                throw new Exception('ç©æ³•ä¸å­˜åœ¨');
            }

            // 4. ç”Ÿæˆè®¢å•å·
            $tid = $this->generateOrderId();

            // 5. åˆ›å»ºæŠ•æ³¨è®°å½•
            $bet = Bet::create([
                'tid' => $tid,
                'userid' => $userid,
                'gid' => $gid,
                'qishu' => $qishu,
                'class' => $play->class,
                'pid' => $pid,
                'nlist' => implode(',', $numbers),
                'points' => $points,
                'peilv' => $play->peilv1,
                'prize' => 0,
                'z' => 0,
                'dates' => now()
            ]);

            // 6. æ‰£é™¤ç”¨æˆ·ä½™é¢
            $user->decrement('points', $points);

            // 7. è®°å½•èµ„é‡‘æµæ°´
            app(MoneyLogService::class)->log(
                $userid,
                -$points,
                'æŠ•æ³¨',
                "æŠ•æ³¨ {$qishu} æœŸ"
            );

            // 8. è§¦å‘é™èµ”é€»è¾‘ï¼ˆå¦‚æœå¯ç”¨ï¼‰
            if (config('lottery.auto_adjust_odds')) {
                app(OddsService::class)->autoAdjust($gid, $qishu, $pid);
            }

            return $bet;
        });
    }

    /**
     * ç”Ÿæˆè®¢å•å·ï¼ˆ8ä½æ•°å­—ï¼‰
     */
    private function generateOrderId()
    {
        return DB::table('x_lib')->max('tid') + 1;
    }

    /**
     * æ‰¹é‡æŠ•æ³¨
     */
    public function batchBet($userid, $gid, $qishu, array $betData)
    {
        $results = [];

        foreach ($betData as $item) {
            $results[] = $this->placeBet(
                $userid,
                $gid,
                $qishu,
                $item['pid'],
                $item['numbers'],
                $item['points']
            );
        }

        return $results;
    }

    /**
     * æ’¤å•
     */
    public function cancelBet($tid)
    {
        return DB::transaction(function () use ($tid) {
            $bet = Bet::lockForUpdate()->findOrFail($tid);

            // éªŒè¯æ˜¯å¦å¯æ’¤å•
            if ($bet->z != 0) {
                throw new Exception('è¯¥è®¢å•å·²å¼€å¥–ï¼Œæ— æ³•æ’¤é”€');
            }

            // é€€è¿˜ç”¨æˆ·ä½™é¢
            $user = User::lockForUpdate()->find($bet->userid);
            $user->increment('points', $bet->points);

            // åˆ é™¤æŠ•æ³¨è®°å½•
            $bet->delete();

            // è®°å½•æµæ°´
            app(MoneyLogService::class)->log(
                $bet->userid,
                $bet->points,
                'æ’¤å•',
                "æ’¤å• {$bet->qishu} æœŸ"
            );

            return true;
        });
    }
}
```

#### 2. LotteryServiceï¼ˆå¼€å¥–æœåŠ¡ï¼‰

```php
<?php
namespace App\Services;

use App\Models\Lottery;
use App\Models\Bet;
use App\Models\User;
use Illuminate\Support\Facades\DB;

class LotteryService
{
    /**
     * å¼€å¥–å¹¶ç»“ç®—
     *
     * @param int $gid æ¸¸æˆID
     * @param string $qishu æœŸå·
     * @param array $numbers å¼€å¥–å·ç  [m1, m2, m3, m4, m5, m6, m7]
     */
    public function draw($gid, $qishu, array $numbers)
    {
        return DB::transaction(function () use ($gid, $qishu, $numbers) {

            // 1. æ›´æ–°å¼€å¥–è®°å½•
            $lottery = Lottery::where('gid', $gid)
                ->where('qishu', $qishu)
                ->firstOrFail();

            $lottery->update([
                'm1' => $numbers[0],
                'm2' => $numbers[1],
                'm3' => $numbers[2],
                'm4' => $numbers[3],
                'm5' => $numbers[4],
                'm6' => $numbers[5],
                'm7' => $numbers[6],
                'z' => 1,
                'kjtime' => now()
            ]);

            // 2. è·å–æ‰€æœ‰æœªç»“ç®—çš„æŠ•æ³¨
            $bets = Bet::where('gid', $gid)
                ->where('qishu', $qishu)
                ->where('z', 0)
                ->get();

            $calculateService = app(LotteryCalculateService::class);

            // 3. éå†æŠ•æ³¨è®°å½•ï¼Œè®¡ç®—ä¸­å¥–
            foreach ($bets as $bet) {
                $isWon = $calculateService->checkWin(
                    $numbers,
                    $bet->class,
                    $bet->numbers
                );

                if ($isWon) {
                    // ä¸­å¥–é‡‘é¢ = æŠ•æ³¨é‡‘é¢ Ã— èµ”ç‡
                    $prize = $bet->points * $bet->peilv;

                    // æ›´æ–°æŠ•æ³¨è®°å½•
                    $bet->update([
                        'prize' => $prize,
                        'z' => 1
                    ]);

                    // å¢åŠ ç”¨æˆ·ä½™é¢
                    User::where('userid', $bet->userid)
                        ->increment('points', $prize);

                    // è®°å½•æµæ°´
                    app(MoneyLogService::class)->log(
                        $bet->userid,
                        $prize,
                        'ä¸­å¥–',
                        "ä¸­å¥– {$qishu} æœŸ"
                    );

                } else {
                    // æœªä¸­å¥–ï¼Œä»…æ ‡è®°ä¸ºå·²ç»“ç®—
                    $bet->update(['z' => 1]);
                }
            }

            return $lottery;
        });
    }

    /**
     * è‡ªåŠ¨é‡‡é›†å¼€å¥–æ•°æ®ï¼ˆè°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼‰
     */
    public function fetchFromApi($gid)
    {
        $apiUrl = config("lottery.api_urls.{$gid}");
        $response = file_get_contents($apiUrl);
        $data = json_decode($response, true);

        // è§£ææ•°æ®ï¼ˆæ ¹æ®ä¸åŒ API æ ¼å¼ï¼‰
        $qishu = $data['qishu'];
        $numbers = explode(',', $data['opencode']);

        // è°ƒç”¨å¼€å¥–
        return $this->draw($gid, $qishu, $numbers);
    }
}
```

#### 3. LotteryCalculateServiceï¼ˆå¼€å¥–è®¡ç®—æœåŠ¡ï¼‰

```php
<?php
namespace App\Services;

class LotteryCalculateService
{
    /**
     * åˆ¤æ–­æ˜¯å¦ä¸­å¥–
     *
     * @param array $openNumbers å¼€å¥–å·ç 
     * @param int $class ç©æ³•ç±»åˆ«
     * @param array $betNumbers æŠ•æ³¨å·ç 
     * @return bool
     */
    public function checkWin($openNumbers, $class, $betNumbers)
    {
        $tema = $openNumbers[6]; // ç‰¹ç 

        switch ($class) {
            case 107: // ç‰¹ç 
                return in_array($tema, $betNumbers);

            case 108: // ç‰¹å•åŒ
                return ($tema % 2 == 1) && in_array('å•', $betNumbers)
                    || ($tema % 2 == 0) && in_array('åŒ', $betNumbers);

            case 109: // ç‰¹å¤§å°
                return ($tema >= 25) && in_array('å¤§', $betNumbers)
                    || ($tema < 25) && in_array('å°', $betNumbers);

            case 110: // ç‰¹æ³¢è‰²
                $bose = $this->getBose($tema);
                return in_array($bose, $betNumbers);

            // æ›´å¤šç©æ³•...
            default:
                return false;
        }
    }

    /**
     * è·å–æ³¢è‰²
     */
    public function getBose($number)
    {
        $red = [1,2,7,8,12,13,18,19,23,24,29,30,34,35,40,45,46];
        $blue = [3,4,9,10,14,15,20,25,26,31,36,37,41,42,47,48];

        if (in_array($number, $red)) return 'çº¢';
        if (in_array($number, $blue)) return 'è“';
        return 'ç»¿';
    }

    /**
     * è·å–ç”Ÿè‚–
     */
    public function getShengxiao($number, $year = 2025)
    {
        $shengxiao = ['é¼ ','ç‰›','è™','å…”','é¾™','è›‡','é©¬','ç¾Š','çŒ´','é¸¡','ç‹—','çŒª'];
        // è®¡ç®—é€»è¾‘...
        return $shengxiao[0];
    }
}
```

---

## æ§åˆ¶å™¨å±‚é‡æ„

### æ§åˆ¶å™¨ç›®å½•ç»“æ„

```
app/Http/Controllers/
â”œâ”€â”€ Admin/                      # ç®¡ç†å‘˜åå°
â”‚   â”œâ”€â”€ AuthController.php     # ç™»å½•/ç™»å‡º
â”‚   â”œâ”€â”€ UserController.php     # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ BetController.php      # è®¢å•ç®¡ç†
â”‚   â”œâ”€â”€ LotteryController.php  # å¼€å¥–ç®¡ç†
â”‚   â”œâ”€â”€ GameController.php     # æ¸¸æˆé…ç½®
â”‚   â”œâ”€â”€ OddsController.php     # èµ”ç‡ç®¡ç†
â”‚   â””â”€â”€ ReportController.php   # æŠ¥è¡¨ç»Ÿè®¡
â”œâ”€â”€ Agent/                      # ä»£ç†åå°
â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”œâ”€â”€ UserController.php
â”‚   â”œâ”€â”€ ReportController.php
â”‚   â””â”€â”€ AccountController.php
â”œâ”€â”€ User/                       # ç”¨æˆ·å‰å°
â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”œâ”€â”€ BetController.php
â”‚   â”œâ”€â”€ AccountController.php
â”‚   â””â”€â”€ LotteryController.php
â””â”€â”€ Api/                        # API æ¥å£
    â”œâ”€â”€ V1/
    â”‚   â”œâ”€â”€ BetController.php
    â”‚   â””â”€â”€ LotteryController.php
    â””â”€â”€ WebhookController.php  # ç¬¬ä¸‰æ–¹å›è°ƒ
```

### æ§åˆ¶å™¨ç¤ºä¾‹

#### 1. Admin/UserControllerï¼ˆç”¨æˆ·ç®¡ç†ï¼‰

**åŸä»£ç ï¼ˆhide/suser.phpï¼‰**ï¼š

```php
<?php
include('../data/comm.inc.php');

$sql = "SELECT * FROM `$tb_user` WHERE userid='$userid'";
$msql->query($sql);
// ...
?>
```

**é‡æ„åï¼ˆLaravelï¼‰**ï¼š

```php
<?php
namespace App\Http\Controllers\Admin;

use App\Models\User;
use App\Http\Requests\UpdateUserRequest;
use Illuminate\Http\Request;

class UserController extends Controller
{
    /**
     * ç”¨æˆ·åˆ—è¡¨
     */
    public function index(Request $request)
    {
        $query = User::query();

        // æœç´¢
        if ($request->has('keyword')) {
            $query->where('username', 'like', "%{$request->keyword}%");
        }

        // ç­›é€‰ä»£ç†
        if ($request->has('agentid')) {
            $query->where('agentid', $request->agentid);
        }

        // ç­›é€‰çŠ¶æ€
        if ($request->has('status')) {
            $query->where('status', $request->status);
        }

        // åˆ†é¡µ
        $users = $query->with('agent') // é¢„åŠ è½½ä»£ç†
            ->paginate(20);

        return view('admin.user.index', compact('users'));
    }

    /**
     * ç”¨æˆ·è¯¦æƒ…
     */
    public function show($userid)
    {
        $user = User::with(['agent', 'bets', 'moneyLogs'])
            ->findOrFail($userid);

        return view('admin.user.show', compact('user'));
    }

    /**
     * ç¼–è¾‘ç”¨æˆ·
     */
    public function update(UpdateUserRequest $request, $userid)
    {
        $user = User::findOrFail($userid);

        $user->update($request->validated());

        return redirect()->route('admin.user.show', $userid)
            ->with('success', 'æ›´æ–°æˆåŠŸ');
    }

    /**
     * è°ƒæ•´ä½™é¢
     */
    public function adjustBalance(Request $request, $userid)
    {
        $request->validate([
            'amount' => 'required|numeric',
            'type' => 'required|in:add,subtract',
            'remark' => 'nullable|string'
        ]);

        $user = User::findOrFail($userid);

        if ($request->type == 'add') {
            $user->increment('points', $request->amount);
        } else {
            $user->decrement('points', $request->amount);
        }

        // è®°å½•æµæ°´
        app(\App\Services\MoneyLogService::class)->log(
            $userid,
            $request->type == 'add' ? $request->amount : -$request->amount,
            'ç®¡ç†å‘˜è°ƒæ•´',
            $request->remark
        );

        return back()->with('success', 'è°ƒæ•´æˆåŠŸ');
    }

    /**
     * åˆ é™¤ç”¨æˆ·
     */
    public function destroy($userid)
    {
        $user = User::findOrFail($userid);

        // æ£€æŸ¥æ˜¯å¦æœ‰æœªç»“ç®—è®¢å•
        if ($user->bets()->unopened()->exists()) {
            return back()->with('error', 'è¯¥ç”¨æˆ·æœ‰æœªç»“ç®—è®¢å•ï¼Œæ— æ³•åˆ é™¤');
        }

        $user->delete();

        return redirect()->route('admin.user.index')
            ->with('success', 'åˆ é™¤æˆåŠŸ');
    }
}
```

#### 2. User/BetControllerï¼ˆç”¨æˆ·æŠ•æ³¨ï¼‰

```php
<?php
namespace App\Http\Controllers\User;

use App\Services\BetService;
use App\Models\Lottery;
use App\Models\Play;
use Illuminate\Http\Request;

class BetController extends Controller
{
    protected $betService;

    public function __construct(BetService $betService)
    {
        $this->betService = $betService;
    }

    /**
     * æŠ•æ³¨é¡µé¢
     */
    public function create($gid)
    {
        // è·å–å½“å‰æœŸå·
        $lottery = Lottery::byGame($gid)
            ->unopened()
            ->orderBy('qishu', 'desc')
            ->first();

        if (!$lottery) {
            return back()->with('error', 'æš‚æ— å¯æŠ•æ³¨æœŸå·');
        }

        // è·å–ç©æ³•åˆ—è¡¨
        $plays = Play::where('gid', $gid)
            ->where('status', 1)
            ->get();

        return view('user.bet.create', compact('lottery', 'plays'));
    }

    /**
     * æäº¤æŠ•æ³¨
     */
    public function store(Request $request)
    {
        $request->validate([
            'gid' => 'required|integer',
            'qishu' => 'required|string',
            'pid' => 'required|integer',
            'numbers' => 'required|array',
            'points' => 'required|numeric|min:2'
        ]);

        try {
            $bet = $this->betService->placeBet(
                auth()->id(),
                $request->gid,
                $request->qishu,
                $request->pid,
                $request->numbers,
                $request->points
            );

            return redirect()->route('user.bet.show', $bet->tid)
                ->with('success', 'æŠ•æ³¨æˆåŠŸ');

        } catch (\Exception $e) {
            return back()->with('error', $e->getMessage());
        }
    }

    /**
     * æŠ•æ³¨è¯¦æƒ…
     */
    public function show($tid)
    {
        $bet = auth()->user()
            ->bets()
            ->with(['game', 'lottery'])
            ->findOrFail($tid);

        return view('user.bet.show', compact('bet'));
    }

    /**
     * æŠ•æ³¨è®°å½•
     */
    public function index(Request $request)
    {
        $query = auth()->user()->bets();

        // ç­›é€‰æ¸¸æˆ
        if ($request->has('gid')) {
            $query->where('gid', $request->gid);
        }

        // ç­›é€‰çŠ¶æ€
        if ($request->has('status')) {
            if ($request->status == 'opened') {
                $query->opened();
            } else {
                $query->unopened();
            }
        }

        $bets = $query->orderBy('dates', 'desc')
            ->paginate(20);

        return view('user.bet.index', compact('bets'));
    }
}
```

---

## è§†å›¾å±‚é€‚é…

### æ–¹æ¡ˆ1ï¼šä¿ç•™ Smartyï¼ˆåˆæœŸæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… è¿ç§»æˆæœ¬ä½ï¼Œç°æœ‰æ¨¡æ¿æ— éœ€æ”¹åŠ¨
- âœ… å‰ç«¯äººå‘˜æ— éœ€å­¦ä¹  Blade è¯­æ³•

**ç¼ºç‚¹**ï¼š
- âš ï¸ æ— æ³•ä½¿ç”¨ Laravel åŸç”Ÿè§†å›¾ç‰¹æ€§ï¼ˆç»„ä»¶ã€æŒ‡ä»¤ï¼‰
- âš ï¸ æ€§èƒ½ç•¥ä½äº Blade

**å®ç°æ–¹å¼**ï¼š

1. å®‰è£… Smarty Composer åŒ…ï¼š
   ```bash
   composer require smarty/smarty
   ```

2. åˆ›å»º Smarty è§†å›¾æœåŠ¡æä¾›è€…ï¼š
   ```php
   // app/Providers/SmartyViewServiceProvider.php
   class SmartyViewServiceProvider extends ServiceProvider
   {
       public function register()
       {
           $this->app->singleton('smarty', function () {
               $smarty = new \Smarty();
               $smarty->setTemplateDir(resource_path('views/smarty/'));
               $smarty->setCompileDir(storage_path('framework/smarty/compile/'));
               $smarty->setCacheDir(storage_path('framework/smarty/cache/'));
               $smarty->left_delimiter = '{+';
               $smarty->right_delimiter = '+}';
               return $smarty;
           });
       }
   }
   ```

3. æ§åˆ¶å™¨ä¸­ä½¿ç”¨ Smartyï¼š
   ```php
   public function index()
   {
       $smarty = app('smarty');
       $smarty->assign('users', User::all());
       return response($smarty->fetch('user/index.html'));
   }
   ```

### æ–¹æ¡ˆ2ï¼šè¿ç§»åˆ° Bladeï¼ˆé•¿æœŸæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… Laravel åŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½æ›´å¥½
- âœ… è¯­æ³•ç®€æ´ï¼Œæ˜“äºç»´æŠ¤
- âœ… æ”¯æŒç»„ä»¶ã€æ’æ§½ã€ç»§æ‰¿

**ç¼ºç‚¹**ï¼š
- âš ï¸ éœ€è¦é‡å†™æ‰€æœ‰æ¨¡æ¿ï¼ˆå·¥ä½œé‡å¤§ï¼‰

**è¿ç§»ç¤ºä¾‹**ï¼š

**åŸ Smarty æ¨¡æ¿ï¼ˆtemplates/default/hide/suser.htmlï¼‰**ï¼š

```html
{+include file='header.html'+}
<div class="content">
    <h1>ç”¨æˆ·åˆ—è¡¨</h1>
    <table>
        <tr>
            <th>ç”¨æˆ·ID</th>
            <th>ç”¨æˆ·å</th>
            <th>ä½™é¢</th>
        </tr>
        {+section name=i loop=$users+}
        <tr>
            <td>{+$users[i].userid+}</td>
            <td>{+$users[i].username+}</td>
            <td>{+$users[i].points+}</td>
        </tr>
        {+/section+}
    </table>
</div>
{+include file='footer.html'+}
```

**é‡æ„å Blade æ¨¡æ¿ï¼ˆresources/views/admin/user/index.blade.phpï¼‰**ï¼š

```html
@extends('layouts.admin')

@section('title', 'ç”¨æˆ·åˆ—è¡¨')

@section('content')
<div class="content">
    <h1>ç”¨æˆ·åˆ—è¡¨</h1>

    <table class="table">
        <thead>
            <tr>
                <th>ç”¨æˆ·ID</th>
                <th>ç”¨æˆ·å</th>
                <th>ä½™é¢</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            @foreach($users as $user)
            <tr>
                <td>{{ $user->userid }}</td>
                <td>{{ $user->username }}</td>
                <td>{{ $user->formatted_points }}</td>
                <td>
                    <a href="{{ route('admin.user.show', $user->userid) }}">è¯¦æƒ…</a>
                    <a href="{{ route('admin.user.edit', $user->userid) }}">ç¼–è¾‘</a>
                </td>
            </tr>
            @endforeach
        </tbody>
    </table>

    {{ $users->links() }}
</div>
@endsection
```

**Blade å¸¸ç”¨è¯­æ³•å¯¹ç…§**ï¼š

| Smarty | Blade | è¯´æ˜ |
|--------|-------|------|
| `{+$var+}` | `{{ $var }}` | è¾“å‡ºå˜é‡ï¼ˆè‡ªåŠ¨è½¬ä¹‰ï¼‰ |
| `{+$var nofilter+}` | `{!! $var !!}` | è¾“å‡ºå˜é‡ï¼ˆä¸è½¬ä¹‰ï¼‰ |
| `{+if $a+}...{+/if+}` | `@if($a)...@endif` | æ¡ä»¶åˆ¤æ–­ |
| `{+foreach $arr as $item+}` | `@foreach($arr as $item)` | å¾ªç¯ |
| `{+include file='header.html'+}` | `@include('header')` | åŒ…å«å­æ¨¡æ¿ |

**æ¨èç­–ç•¥**ï¼š
- ç¬¬ä¸€é˜¶æ®µï¼šä¿ç•™ Smartyï¼Œå¿«é€Ÿè¿ç§»
- ç¬¬äºŒé˜¶æ®µï¼šé€æ­¥è¿ç§»åˆ° Bladeï¼ˆä¼˜å…ˆè¿ç§»é«˜é¢‘é¡µé¢ï¼‰

---

## ä¸­é—´ä»¶è®¾è®¡

### æ ¸å¿ƒä¸­é—´ä»¶

| ä¸­é—´ä»¶åç§° | åŠŸèƒ½ | å¯¹åº”åŸæ–‡ä»¶ |
|-----------|------|-----------|
| `AdminAuth` | ç®¡ç†å‘˜ç™»å½•éªŒè¯ | `hide/checklogin.php` |
| `AgentAuth` | ä»£ç†ç™»å½•éªŒè¯ | `agent/checklogin.php` |
| `UserAuth` | ç”¨æˆ·ç™»å½•éªŒè¯ | `uxj/check.php` |
| `CheckBetTime` | æŠ•æ³¨æ—¶é—´éªŒè¯ | å†…åµŒåœ¨æŠ•æ³¨é€»è¾‘ä¸­ |
| `LogActivity` | æ“ä½œæ—¥å¿—è®°å½• | `x_admins_page` è¡¨ |
| `CheckUserStatus` | ç”¨æˆ·çŠ¶æ€æ£€æŸ¥ï¼ˆå†»ç»“/ç¦ç”¨ï¼‰ | åˆ†æ•£åœ¨å„å¤„ |

### ä¸­é—´ä»¶ç¤ºä¾‹

#### 1. AdminAuth ä¸­é—´ä»¶

**åŸä»£ç ï¼ˆhide/checklogin.phpï¼‰**ï¼š

```php
<?php
session_start();
if (!isset($_SESSION['adminid'])) {
    header('Location: login.php');
    exit;
}
?>
```

**é‡æ„åï¼ˆLaravelï¼‰**ï¼š

```php
<?php
namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class AdminAuth
{
    public function handle(Request $request, Closure $next)
    {
        // æ£€æŸ¥æ˜¯å¦ç™»å½•
        if (!auth('admin')->check()) {
            return redirect()->route('admin.login')
                ->with('error', 'è¯·å…ˆç™»å½•');
        }

        // æ£€æŸ¥æƒé™çº§åˆ«
        if (auth('admin')->user()->level > 1) {
            abort(403, 'æƒé™ä¸è¶³');
        }

        return $next($request);
    }
}
```

#### 2. LogActivity ä¸­é—´ä»¶ï¼ˆæ“ä½œæ—¥å¿—ï¼‰

```php
<?php
namespace App\Http\Middleware;

use App\Models\AdminLog;
use Closure;

class LogActivity
{
    public function handle($request, Closure $next)
    {
        $response = $next($request);

        // è®°å½•ç®¡ç†å‘˜æ“ä½œ
        if (auth('admin')->check()) {
            AdminLog::create([
                'adminid' => auth('admin')->id(),
                'action' => $request->path(),
                'method' => $request->method(),
                'ip' => $request->ip(),
                'user_agent' => $request->userAgent(),
                'created_at' => now()
            ]);
        }

        return $response;
    }
}
```

#### 3. CheckBetTime ä¸­é—´ä»¶ï¼ˆæŠ•æ³¨æ—¶é—´é™åˆ¶ï¼‰

```php
<?php
namespace App\Http\Middleware;

use App\Models\Lottery;
use Closure;

class CheckBetTime
{
    public function handle($request, Closure $next)
    {
        $qishu = $request->input('qishu');
        $lottery = Lottery::where('qishu', $qishu)->first();

        if (!$lottery) {
            return response()->json(['error' => 'æœŸå·ä¸å­˜åœ¨'], 400);
        }

        // æ£€æŸ¥æ˜¯å¦å·²å°ç›˜
        if ($lottery->z != 0) {
            return response()->json(['error' => 'è¯¥æœŸå·²å°ç›˜'], 400);
        }

        // æ£€æŸ¥æ˜¯å¦åœ¨å¼€å¥–å‰5åˆ†é’Ÿ
        $minutesBeforeDraw = now()->diffInMinutes($lottery->kjtime);
        if ($minutesBeforeDraw < 5) {
            return response()->json(['error' => 'å°ç›˜æ—¶é—´å·²åˆ°'], 400);
        }

        return $next($request);
    }
}
```

### ä¸­é—´ä»¶æ³¨å†Œ

åœ¨ `app/Http/Kernel.php` ä¸­æ³¨å†Œï¼š

```php
protected $middlewareGroups = [
    'admin' => [
        \App\Http\Middleware\AdminAuth::class,
        \App\Http\Middleware\LogActivity::class,
    ],
    'agent' => [
        \App\Http\Middleware\AgentAuth::class,
    ],
    'user' => [
        \App\Http\Middleware\UserAuth::class,
        \App\Http\Middleware\CheckUserStatus::class,
    ],
];
```

---

## è·¯ç”±è§„åˆ’

### è·¯ç”±æ–‡ä»¶ç»“æ„

```
routes/
â”œâ”€â”€ web.php          # å‰å°è·¯ç”±
â”œâ”€â”€ admin.php        # ç®¡ç†å‘˜åå°è·¯ç”±
â”œâ”€â”€ agent.php        # ä»£ç†åå°è·¯ç”±
â””â”€â”€ api.php          # API è·¯ç”±
```

### è·¯ç”±ç¤ºä¾‹

#### 1. ç®¡ç†å‘˜åå°è·¯ç”±ï¼ˆroutes/admin.phpï¼‰

```php
<?php
use App\Http\Controllers\Admin;
use Illuminate\Support\Facades\Route;

// ç™»å½•è·¯ç”±ï¼ˆæ— éœ€è®¤è¯ï¼‰
Route::prefix('admin')->name('admin.')->group(function () {

    Route::get('login', [Admin\AuthController::class, 'showLogin'])->name('login');
    Route::post('login', [Admin\AuthController::class, 'login']);

    // éœ€è¦è®¤è¯çš„è·¯ç”±
    Route::middleware(['admin'])->group(function () {

        Route::post('logout', [Admin\AuthController::class, 'logout'])->name('logout');

        // ç”¨æˆ·ç®¡ç†
        Route::prefix('users')->name('user.')->group(function () {
            Route::get('/', [Admin\UserController::class, 'index'])->name('index');
            Route::get('{userid}', [Admin\UserController::class, 'show'])->name('show');
            Route::get('{userid}/edit', [Admin\UserController::class, 'edit'])->name('edit');
            Route::put('{userid}', [Admin\UserController::class, 'update'])->name('update');
            Route::delete('{userid}', [Admin\UserController::class, 'destroy'])->name('destroy');
            Route::post('{userid}/adjust-balance', [Admin\UserController::class, 'adjustBalance'])
                ->name('adjust-balance');
        });

        // æŠ•æ³¨ç®¡ç†
        Route::prefix('bets')->name('bet.')->group(function () {
            Route::get('/', [Admin\BetController::class, 'index'])->name('index');
            Route::get('{tid}', [Admin\BetController::class, 'show'])->name('show');
            Route::delete('{tid}', [Admin\BetController::class, 'cancel'])->name('cancel');
        });

        // å¼€å¥–ç®¡ç†
        Route::prefix('lottery')->name('lottery.')->group(function () {
            Route::get('/', [Admin\LotteryController::class, 'index'])->name('index');
            Route::get('create', [Admin\LotteryController::class, 'create'])->name('create');
            Route::post('/', [Admin\LotteryController::class, 'store'])->name('store');
            Route::post('draw', [Admin\LotteryController::class, 'draw'])->name('draw');
        });

        // ç³»ç»Ÿé…ç½®
        Route::get('config', [Admin\ConfigController::class, 'edit'])->name('config.edit');
        Route::put('config', [Admin\ConfigController::class, 'update'])->name('config.update');
    });
});
```

#### 2. ç”¨æˆ·å‰å°è·¯ç”±ï¼ˆroutes/web.phpï¼‰

```php
<?php
use App\Http\Controllers\User;

// ç”¨æˆ·è·¯ç”±
Route::prefix('user')->name('user.')->group(function () {

    Route::get('login', [User\AuthController::class, 'showLogin'])->name('login');
    Route::post('login', [User\AuthController::class, 'login']);
    Route::get('register', [User\AuthController::class, 'showRegister'])->name('register');
    Route::post('register', [User\AuthController::class, 'register']);

    // éœ€è¦ç™»å½•
    Route::middleware(['user'])->group(function () {

        Route::post('logout', [User\AuthController::class, 'logout'])->name('logout');

        // æŠ•æ³¨
        Route::prefix('bet')->name('bet.')->group(function () {
            Route::get('create/{gid}', [User\BetController::class, 'create'])->name('create');
            Route::post('/', [User\BetController::class, 'store'])
                ->middleware('check.bet.time')
                ->name('store');
            Route::get('/', [User\BetController::class, 'index'])->name('index');
            Route::get('{tid}', [User\BetController::class, 'show'])->name('show');
        });

        // å¼€å¥–ç»“æœ
        Route::get('lottery', [User\LotteryController::class, 'index'])->name('lottery.index');
        Route::get('lottery/{qishu}', [User\LotteryController::class, 'show'])->name('lottery.show');

        // è´¦æˆ·
        Route::get('account', [User\AccountController::class, 'index'])->name('account');
        Route::post('account/change-password', [User\AccountController::class, 'changePassword'])
            ->name('account.change-password');
    });
});
```

### RESTful API è·¯ç”±ï¼ˆroutes/api.phpï¼‰

```php
<?php
use App\Http\Controllers\Api\V1;

Route::prefix('v1')->name('api.v1.')->group(function () {

    // å…¬å¼€æ¥å£
    Route::get('lottery/latest', [V1\LotteryController::class, 'latest']);
    Route::get('lottery/{qishu}', [V1\LotteryController::class, 'show']);

    // éœ€è¦è®¤è¯ï¼ˆAPI Tokenï¼‰
    Route::middleware('auth:sanctum')->group(function () {

        // æŠ•æ³¨
        Route::post('bet', [V1\BetController::class, 'store']);
        Route::get('bet', [V1\BetController::class, 'index']);
        Route::get('bet/{tid}', [V1\BetController::class, 'show']);

        // ç”¨æˆ·ä¿¡æ¯
        Route::get('user', [V1\UserController::class, 'profile']);
    });
});

// Webhook å›è°ƒï¼ˆç¬¬ä¸‰æ–¹å¼€å¥–æ•°æ®ï¼‰
Route::post('webhook/lottery', [WebhookController::class, 'lottery']);
```

---

## å¼€å‘é˜¶æ®µä¸å‘¨æœŸ

### æ€»ä½“æ—¶é—´è§„åˆ’

**æ€»å‘¨æœŸ**ï¼š**19å‘¨ï¼ˆçº¦ 4.5 ä¸ªæœˆï¼‰**

åˆ†ä¸º **7 ä¸ªé˜¶æ®µ**ï¼Œæ¯ä¸ªé˜¶æ®µæœ‰æ˜ç¡®çš„äº¤ä»˜ç‰©å’ŒéªŒæ”¶æ ‡å‡†ã€‚

---

### ğŸ“… é˜¶æ®µ1ï¼šç¯å¢ƒæ­å»º + Model å±‚è¿ç§»ï¼ˆ2å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 1ï¼šç¯å¢ƒå‡†å¤‡**
- [ ] å®‰è£… Laravel 10.x æ¡†æ¶
- [ ] é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆè¿æ¥åˆ°ç°æœ‰æ•°æ®åº“ï¼‰
- [ ] åˆ›å»º `.env` é…ç½®æ–‡ä»¶
- [ ] é…ç½® Redisã€é˜Ÿåˆ—ã€æ—¥å¿—
- [ ] å®‰è£…å¼€å‘å·¥å…·ï¼ˆLaravel Debugbarã€IDE Helperï¼‰
- [ ] é…ç½®ä»£ç è§„èŒƒæ£€æŸ¥å·¥å…·ï¼ˆPHP-CS-Fixerã€PHPStanï¼‰

**Week 2ï¼šModel å±‚å¼€å‘**
- [ ] åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨çš„ Migration æ–‡ä»¶ï¼ˆ40+ ä¸ªè¡¨ï¼‰
- [ ] åˆ›å»ºæ ¸å¿ƒ Modelï¼ˆUserã€Betã€Lotteryã€Adminã€Agentç­‰ï¼‰
- [ ] å®šä¹‰ Model å…³è”å…³ç³»ï¼ˆbelongsToã€hasManyï¼‰
- [ ] ç¼–å†™ Model è®¿é—®å™¨å’Œä¿®æ”¹å™¨
- [ ] ç¼–å†™ Seederï¼ˆæµ‹è¯•æ•°æ®å¡«å……ï¼‰
- [ ] ç¼–å†™ Model å•å…ƒæµ‹è¯•

#### äº¤ä»˜ç‰©

- âœ… Laravel é¡¹ç›®åˆå§‹åŒ–å®Œæˆ
- âœ… æ‰€æœ‰ Model ç±»åˆ›å»ºå®Œæˆï¼ˆ40+ ä¸ªï¼‰
- âœ… Model å•å…ƒæµ‹è¯•é€šè¿‡ç‡ > 80%
- âœ… æ•°æ®åº“è¿ç§»æ–‡ä»¶å®Œæ•´

#### éªŒæ”¶æ ‡å‡†

```bash
# è¿è¡Œæµ‹è¯•
php artisan test --filter ModelTest

# æ£€æŸ¥ä»£ç è§„èŒƒ
./vendor/bin/phpstan analyze app/Models
```

---

### ğŸ“… é˜¶æ®µ2ï¼šæ ¸å¿ƒä¸šåŠ¡è¿ç§»ï¼ˆç®¡ç†å‘˜åå°ï¼‰ï¼ˆ4å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 3ï¼šService å±‚å¼€å‘**
- [ ] åˆ›å»ºæ ¸å¿ƒ Service ç±»ï¼ˆBetServiceã€LotteryServiceã€UserServiceï¼‰
- [ ] è¿ç§» `func/func.php` ä¸šåŠ¡å‡½æ•°åˆ° Service
- [ ] è¿ç§» `func/csfunc.php` å½©ç¥¨é€»è¾‘åˆ° Service
- [ ] è¿ç§» `func/malhc.php` å¼€å¥–è®¡ç®—é€»è¾‘
- [ ] ç¼–å†™ Service å•å…ƒæµ‹è¯•

**Week 4ï¼šç®¡ç†å‘˜è®¤è¯æ¨¡å—**
- [ ] åˆ›å»º AdminAuth ä¸­é—´ä»¶
- [ ] å®ç°ç®¡ç†å‘˜ç™»å½•/ç™»å‡ºï¼ˆæ›¿ä»£ `hide/login.php`ï¼‰
- [ ] å®ç°æ“ä½œæ—¥å¿—è®°å½•ï¼ˆæ›¿ä»£ `x_admins_page` è¡¨å†™å…¥ï¼‰
- [ ] å®ç° RBAC æƒé™æ§åˆ¶

**Week 5ï¼šç”¨æˆ·ç®¡ç†æ¨¡å—**
- [ ] ç”¨æˆ·åˆ—è¡¨é¡µï¼ˆæ›¿ä»£ `hide/suser.php`ï¼‰
- [ ] ç”¨æˆ·è¯¦æƒ…é¡µï¼ˆæ›¿ä»£ `hide/user.php`ï¼‰
- [ ] ç”¨æˆ·ç¼–è¾‘åŠŸèƒ½
- [ ] ä½™é¢è°ƒæ•´åŠŸèƒ½ï¼ˆæ›¿ä»£ `hide/points.php`ï¼‰
- [ ] ç”¨æˆ·åˆ é™¤åŠŸèƒ½

**Week 6ï¼šæŠ•æ³¨ç®¡ç† + å¼€å¥–ç®¡ç†**
- [ ] æŠ•æ³¨è®°å½•åˆ—è¡¨ï¼ˆæ›¿ä»£ `hide/lib.php`ï¼‰
- [ ] æŠ•æ³¨è¯¦æƒ…é¡µ
- [ ] æ’¤å•åŠŸèƒ½
- [ ] å¼€å¥–ç®¡ç†ï¼ˆæ›¿ä»£ `hide/kj.php`ï¼‰
- [ ] æ‰‹åŠ¨å¼€å¥–åŠŸèƒ½
- [ ] è‡ªåŠ¨é‡‡é›†å¼€å¥–æ•°æ®ï¼ˆæ›¿ä»£ `tools/autokjs_ss.php`ï¼‰

#### äº¤ä»˜ç‰©

- âœ… ç®¡ç†å‘˜åå°æ ¸å¿ƒåŠŸèƒ½å®Œæˆ
- âœ… ç”¨æˆ·ç®¡ç†ã€æŠ•æ³¨ç®¡ç†ã€å¼€å¥–ç®¡ç†åŠŸèƒ½å¯ç”¨
- âœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡ > 90%

#### éªŒæ”¶æ ‡å‡†

- ç®¡ç†å‘˜å¯æ­£å¸¸ç™»å½•
- ç”¨æˆ·åˆ—è¡¨åˆ†é¡µæ­£å¸¸
- æŠ•æ³¨è®°å½•æŸ¥è¯¢æ­£å¸¸
- å¼€å¥–åŠŸèƒ½æ­£å¸¸

---

### ğŸ“… é˜¶æ®µ3ï¼šä»£ç†åå°è¿ç§»ï¼ˆ3å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 7ï¼šä»£ç†è®¤è¯ + ç”¨æˆ·ç®¡ç†**
- [ ] åˆ›å»º AgentAuth ä¸­é—´ä»¶
- [ ] ä»£ç†ç™»å½•/ç™»å‡ºï¼ˆæ›¿ä»£ `agent/login.php`ï¼‰
- [ ] ä»£ç†ç”¨æˆ·åˆ—è¡¨ï¼ˆæ›¿ä»£ `agent/suser.php`ï¼‰
- [ ] ä»£ç†ç”¨æˆ·è¯¦æƒ…

**Week 8ï¼šæŠ¥è¡¨ç»Ÿè®¡**
- [ ] ç›ˆäºæŠ¥è¡¨ï¼ˆæ›¿ä»£ `agent/report.php`ï¼‰
- [ ] æŠ•æ³¨ç»Ÿè®¡
- [ ] ç”¨æˆ·ç»Ÿè®¡
- [ ] å¯¼å‡º Excel åŠŸèƒ½

**Week 9ï¼šè´¦æˆ·ç®¡ç†**
- [ ] è´¦æˆ·ä¿¡æ¯é¡µï¼ˆæ›¿ä»£ `agent/account.php`ï¼‰
- [ ] ä¿®æ”¹å¯†ç 
- [ ] èµ„é‡‘æµæ°´æŸ¥è¯¢

#### äº¤ä»˜ç‰©

- âœ… ä»£ç†åå°åŠŸèƒ½å®Œæˆ
- âœ… æŠ¥è¡¨ç»Ÿè®¡åŠŸèƒ½å¯ç”¨

#### éªŒæ”¶æ ‡å‡†

- ä»£ç†å¯æ­£å¸¸ç™»å½•
- ä¸‹çº§ç”¨æˆ·åˆ—è¡¨æ­£å¸¸
- æŠ¥è¡¨ç»Ÿè®¡æ•°æ®å‡†ç¡®

---

### ğŸ“… é˜¶æ®µ4ï¼šç”¨æˆ·å‰å°è¿ç§»ï¼ˆPC + ç§»åŠ¨ç«¯ï¼‰ï¼ˆ4å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 10ï¼šç”¨æˆ·è®¤è¯**
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•ï¼ˆæ›¿ä»£ `uxj/login.php`ï¼‰
- [ ] æ‰¾å›å¯†ç 
- [ ] ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¯é€‰ï¼‰

**Week 11-12ï¼šæŠ•æ³¨åŠŸèƒ½**
- [ ] æŠ•æ³¨ç•Œé¢ï¼ˆæ›¿ä»£ `uxj/long.php`ã€`uxj/bao.php`ï¼‰
- [ ] å¿«é€ŸæŠ•æ³¨
- [ ] æ‰¹é‡æŠ•æ³¨
- [ ] æŠ•æ³¨è®°å½•æŸ¥è¯¢ï¼ˆæ›¿ä»£ `uxj/lib.php`ï¼‰
- [ ] æŠ•æ³¨é™é¢æ§åˆ¶

**Week 13ï¼šè´¦æˆ· + å¼€å¥–**
- [ ] è´¦æˆ·ä¿¡æ¯é¡µï¼ˆæ›¿ä»£ `uxj/member.php`ï¼‰
- [ ] å……å€¼/æç°æ¥å£ï¼ˆé¢„ç•™ï¼‰
- [ ] å¼€å¥–å†å²æŸ¥è¯¢
- [ ] å¼€å¥–ç»“æœæ¨é€ï¼ˆWebSocketï¼Œå¯é€‰ï¼‰

#### äº¤ä»˜ç‰©

- âœ… PC ç”¨æˆ·å‰å°å®Œæˆ
- âœ… ç§»åŠ¨ç«¯è‡ªé€‚åº”ï¼ˆå¤ç”¨åç«¯æ¥å£ï¼‰

#### éªŒæ”¶æ ‡å‡†

- ç”¨æˆ·å¯æ³¨å†Œ/ç™»å½•
- æŠ•æ³¨æµç¨‹å®Œæ•´
- ä½™é¢æ‰£å‡æ­£ç¡®
- å¼€å¥–ç»“æœå±•ç¤ºæ­£å¸¸

---

### ğŸ“… é˜¶æ®µ5ï¼šAPI æ¥å£å°è£…ï¼ˆ2å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 14ï¼šRESTful API å¼€å‘**
- [ ] ç”¨æˆ·è®¤è¯ APIï¼ˆOAuth2 / JWTï¼‰
- [ ] æŠ•æ³¨ API
- [ ] å¼€å¥–ç»“æœ API
- [ ] ç”¨æˆ·ä¿¡æ¯ API
- [ ] API æ–‡æ¡£ï¼ˆSwagger / Postmanï¼‰

**Week 15ï¼šWebhook + é˜Ÿåˆ—**
- [ ] ç¬¬ä¸‰æ–¹å¼€å¥–æ•°æ® Webhook
- [ ] é˜Ÿåˆ—ä»»åŠ¡ï¼ˆå¼‚æ­¥å¼€å¥–ã€æŠ¥è¡¨ç”Ÿæˆï¼‰
- [ ] å®šæ—¶ä»»åŠ¡è¿ç§»ï¼ˆæ›¿ä»£ `tools/cj_kj.php`ï¼‰

#### äº¤ä»˜ç‰©

- âœ… å®Œæ•´çš„ RESTful API
- âœ… API æ–‡æ¡£
- âœ… é˜Ÿåˆ—ç³»ç»Ÿæ­£å¸¸è¿è¡Œ

#### éªŒæ”¶æ ‡å‡†

```bash
# æµ‹è¯• API
curl -X POST http://api.lottery.com/v1/bet \
  -H "Authorization: Bearer TOKEN" \
  -d '{"gid":300,"qishu":"2025001","pid":1070001,"numbers":[1,2,3],"points":100}'
```

---

### ğŸ“… é˜¶æ®µ6ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ3å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 16ï¼šåŠŸèƒ½æµ‹è¯•**
- [ ] ç¼–å†™åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹ï¼ˆ100+ ä¸ªï¼‰
- [ ] æ‰‹åŠ¨å›å½’æµ‹è¯•ï¼ˆæ‰€æœ‰åŠŸèƒ½ï¼‰
- [ ] Bug ä¿®å¤

**Week 17ï¼šæ€§èƒ½ä¼˜åŒ–**
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼ˆN+1 é—®é¢˜ã€ç´¢å¼•ä¼˜åŒ–ï¼‰
- [ ] Redis ç¼“å­˜ï¼ˆç”¨æˆ·ä¿¡æ¯ã€ç©æ³•é…ç½®ã€å¼€å¥–ç»“æœï¼‰
- [ ] HTTP ç¼“å­˜ï¼ˆé™æ€èµ„æºï¼‰
- [ ] å‹åŠ›æµ‹è¯•ï¼ˆ1000 å¹¶å‘æŠ•æ³¨ï¼‰

**Week 18ï¼šå®‰å…¨åŠ å›º**
- [ ] SQL æ³¨å…¥æµ‹è¯•
- [ ] XSS æµ‹è¯•
- [ ] CSRF æµ‹è¯•
- [ ] å¯†ç å¼ºåº¦æ£€æŸ¥
- [ ] API é™æµï¼ˆRate Limitingï¼‰

#### äº¤ä»˜ç‰©

- âœ… æµ‹è¯•æŠ¥å‘Šï¼ˆBug List + ä¿®å¤è®°å½•ï¼‰
- âœ… æ€§èƒ½æµ‹è¯•æŠ¥å‘Š
- âœ… å®‰å…¨å®¡è®¡æŠ¥å‘Š

#### éªŒæ”¶æ ‡å‡†

- åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡ > 95%
- æ€§èƒ½æµ‹è¯•ï¼š1000 å¹¶å‘ QPS > 500
- å®‰å…¨æµ‹è¯•ï¼šæ— é«˜å±æ¼æ´

---

### ğŸ“… é˜¶æ®µ7ï¼šå…¨é‡ä¸Šçº¿ä¸ç›‘æ§ï¼ˆ1å‘¨ï¼‰

#### å·¥ä½œå†…å®¹

**Week 19ï¼šéƒ¨ç½²ä¸Šçº¿**
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆDocker + Nginx + MySQL + Redisï¼‰
- [ ] æ•°æ®è¿ç§»ï¼ˆåŒå†™æ¨¡å¼åˆ‡æ¢åˆ°æ–°ç³»ç»Ÿï¼‰
- [ ] æµé‡åˆ‡æ¢ï¼ˆé€æ­¥ä» 0% â†’ 100%ï¼‰
- [ ] ç›‘æ§å‘Šè­¦é…ç½®ï¼ˆSentryã€Prometheusï¼‰
- [ ] æ—¥å¿—åˆ†æï¼ˆELK Stackï¼‰

#### äº¤ä»˜ç‰©

- âœ… æ–°ç³»ç»Ÿå…¨é‡ä¸Šçº¿
- âœ… æ—§ç³»ç»Ÿä¸‹çº¿
- âœ… ç›‘æ§ç³»ç»Ÿè¿è¡Œ

#### éªŒæ”¶æ ‡å‡†

- æ–°ç³»ç»Ÿæ‰¿è½½ 100% æµé‡
- é”™è¯¯ç‡ < 0.1%
- å“åº”æ—¶é—´ < 200msï¼ˆP95ï¼‰

---

## é£é™©è¯„ä¼°ä¸åº”å¯¹

### é«˜é£é™©é¡¹

| é£é™©é¡¹ | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|-------|------|------|---------|
| **æ•°æ®è¿ç§»é”™è¯¯** | é«˜ | é«˜ | ä½¿ç”¨åŒå†™æ¨¡å¼ï¼Œä¿ç•™æ—§ç³»ç»Ÿå¤‡ä»½ |
| **ä¸šåŠ¡é€»è¾‘ç†è§£åå·®** | ä¸­ | é«˜ | ä¸ä¸šåŠ¡äººå‘˜å……åˆ†æ²Ÿé€šï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹éªŒè¯ |
| **æ€§èƒ½ä¸è¾¾æ ‡** | ä¸­ | ä¸­ | æå‰è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œé¢„ç•™ä¼˜åŒ–æ—¶é—´ |
| **é—ç•™ Bug é‡ç°** | ä½ | ä¸­ | å……åˆ†æµ‹è¯•ï¼Œé€æ­¥ä¸Šçº¿ |
| **å›¢é˜ŸæŠ€èƒ½ä¸è¶³** | ä¸­ | ä½ | æå‰åŸ¹è®­ Laravel å¼€å‘ |

### åº”æ€¥é¢„æ¡ˆ

1. **å›æ»šæœºåˆ¶**ï¼š
   - ä¿ç•™æ—§ç³»ç»Ÿä»£ç 
   - æ•°æ®åº“åŒå†™ï¼Œå¯éšæ—¶åˆ‡æ¢å›æ—§ç³»ç»Ÿ

2. **ç°åº¦å‘å¸ƒ**ï¼š
   - å…ˆä¸Šçº¿ç®¡ç†åå°ï¼ˆå½±å“èŒƒå›´å°ï¼‰
   - å†ä¸Šçº¿ç”¨æˆ·å‰å°ï¼ˆé€æ­¥å¼€æ”¾æµé‡ï¼‰

3. **ç›‘æ§å‘Šè­¦**ï¼š
   - å®æ—¶ç›‘æ§é”™è¯¯ç‡ã€å“åº”æ—¶é—´
   - å¼‚å¸¸è‡ªåŠ¨å‘Šè­¦ï¼ˆçŸ­ä¿¡/é‚®ä»¶ï¼‰

---

## æµ‹è¯•æ–¹æ¡ˆ

### å•å…ƒæµ‹è¯•

**ç›®æ ‡è¦†ç›–ç‡**ï¼š> 80%

**æµ‹è¯•æ¡†æ¶**ï¼šPHPUnit

**ç¤ºä¾‹**ï¼š

```php
<?php
namespace Tests\Unit;

use Tests\TestCase;
use App\Models\User;
use App\Services\BetService;

class BetServiceTest extends TestCase
{
    public function test_place_bet_success()
    {
        $user = User::factory()->create(['points' => 1000]);

        $betService = app(BetService::class);

        $bet = $betService->placeBet(
            $user->userid,
            300,
            '2025001',
            1070001,
            [1, 2, 3],
            100
        );

        $this->assertDatabaseHas('x_lib', [
            'tid' => $bet->tid,
            'points' => 100
        ]);

        $user->refresh();
        $this->assertEquals(900, $user->points);
    }

    public function test_place_bet_insufficient_balance()
    {
        $this->expectException(\Exception::class);

        $user = User::factory()->create(['points' => 50]);

        app(BetService::class)->placeBet(
            $user->userid,
            300,
            '2025001',
            1070001,
            [1, 2, 3],
            100
        );
    }
}
```

### åŠŸèƒ½æµ‹è¯•

**å·¥å…·**ï¼šLaravel Duskï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰

**ç¤ºä¾‹**ï¼š

```php
<?php
namespace Tests\Feature;

use Tests\DuskTestCase;
use App\Models\User;

class UserBetTest extends DuskTestCase
{
    public function test_user_can_place_bet()
    {
        $user = User::factory()->create(['points' => 1000]);

        $this->browse(function ($browser) use ($user) {
            $browser->loginAs($user)
                ->visit('/user/bet/create/300')
                ->type('points', '100')
                ->check('numbers[]', '1')
                ->press('æäº¤æŠ•æ³¨')
                ->assertSee('æŠ•æ³¨æˆåŠŸ');
        });
    }
}
```

---

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

1. **ç´¢å¼•ä¼˜åŒ–**ï¼š
   ```sql
   -- æŠ•æ³¨è®°å½•è¡¨
   CREATE INDEX idx_userid_qishu ON x_lib(userid, qishu);
   CREATE INDEX idx_gid_qishu_z ON x_lib(gid, qishu, z);

   -- å¼€å¥–è®°å½•è¡¨
   CREATE INDEX idx_gid_qishu ON x_kj(gid, qishu);
   ```

2. **æŸ¥è¯¢ä¼˜åŒ–**ï¼š
   ```php
   // é¿å… N+1 æŸ¥è¯¢
   $users = User::with('agent', 'bets')->get();

   // ä½¿ç”¨ Chunk å¤„ç†å¤§æ•°æ®
   User::chunk(100, function ($users) {
       foreach ($users as $user) {
           // å¤„ç†...
       }
   });
   ```

### Redis ç¼“å­˜

```php
// ç¼“å­˜ç©æ³•é…ç½®ï¼ˆ1å°æ—¶ï¼‰
$plays = Cache::remember("game.{$gid}.plays", 3600, function () use ($gid) {
    return Play::where('gid', $gid)->get();
});

// ç¼“å­˜å¼€å¥–ç»“æœï¼ˆæ°¸ä¹…ï¼‰
Cache::forever("lottery.{$qishu}", $lottery);
```

### é˜Ÿåˆ—å¼‚æ­¥å¤„ç†

```php
// å¼‚æ­¥å¼€å¥–ç»“ç®—
dispatch(new SettleBetsJob($qishu));

// å¼‚æ­¥ç”ŸæˆæŠ¥è¡¨
dispatch(new GenerateReportJob($startDate, $endDate));
```

---

## éƒ¨ç½²æ–¹æ¡ˆ

### Docker éƒ¨ç½²

**docker-compose.yml**ï¼š

```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/var/www
    environment:
      - APP_ENV=production
      - DB_HOST=mysql
      - REDIS_HOST=redis

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - app

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: secret
      MYSQL_DATABASE: lottery
    volumes:
      - mysql-data:/var/lib/mysql

  redis:
    image: redis:alpine
    ports:
      - "6379:6379"

volumes:
  mysql-data:
```

### CI/CD æµç¨‹

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Run Tests
        run: |
          composer install
          php artisan test

      - name: Deploy to Production
        run: |
          ssh user@server 'cd /var/www && git pull && php artisan migrate --force'
```

---

## æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿

âœ… **å®‰å…¨æ€§å¤§å¹…æå‡**ï¼šORM é˜²æ³¨å…¥ã€å¯†ç åŠ å¯†ã€CSRF é˜²æŠ¤
âœ… **ä»£ç è´¨é‡æå‡**ï¼šè§„èŒƒæ¶æ„ã€å•å…ƒæµ‹è¯•ã€ä»£ç å®¡æŸ¥
âœ… **å¯ç»´æŠ¤æ€§æå‡**ï¼šç»Ÿä¸€æ¡†æ¶ã€æ—¥å¿—ç³»ç»Ÿã€è°ƒè¯•å·¥å…·
âœ… **æ€§èƒ½æå‡**ï¼šç¼“å­˜æœºåˆ¶ã€æŸ¥è¯¢ä¼˜åŒ–ã€é˜Ÿåˆ—å¼‚æ­¥
âœ… **æ‰©å±•æ€§æå‡**ï¼šAPI æ¥å£ã€äº‹ä»¶ç³»ç»Ÿã€ä¾èµ–æ³¨å…¥

### æ—¶é—´ä¸æˆæœ¬

| é˜¶æ®µ | å‘¨æœŸ | äººåŠ› | æˆæœ¬ï¼ˆä¼°ç®—ï¼‰ |
|-----|------|------|------------|
| é˜¶æ®µ1 | 2å‘¨ | 2äºº | 4äººå‘¨ |
| é˜¶æ®µ2 | 4å‘¨ | 3äºº | 12äººå‘¨ |
| é˜¶æ®µ3 | 3å‘¨ | 2äºº | 6äººå‘¨ |
| é˜¶æ®µ4 | 4å‘¨ | 3äºº | 12äººå‘¨ |
| é˜¶æ®µ5 | 2å‘¨ | 2äºº | 4äººå‘¨ |
| é˜¶æ®µ6 | 3å‘¨ | 3äºº | 9äººå‘¨ |
| é˜¶æ®µ7 | 1å‘¨ | 3äºº | 3äººå‘¨ |
| **æ€»è®¡** | **19å‘¨** | **- | **50äººå‘¨** |

**æŒ‰æ¯äººå‘¨ 10,000 å…ƒè®¡ç®—ï¼Œæ€»å¼€å‘æˆæœ¬çº¦ 50 ä¸‡å…ƒ**

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**ä½œè€…**ï¼šClaude AI
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-11-09
**æœ€åæ›´æ–°**ï¼š2025-11-09
