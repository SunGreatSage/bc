# func Ê®°Âùó - ‰∏öÂä°ÂáΩÊï∞Â∫ì

[Ê†πÁõÆÂΩï](../CLAUDE.md) > **func**

> ÊúÄÂêéÊõ¥Êñ∞Ôºö2025-11-09 14:50:39

---

## ÂèòÊõ¥ËÆ∞ÂΩï (Changelog)

### 2025-11-09 14:50:39
- ÂàùÂßãÂåñ func Ê®°ÂùóÊñáÊ°£
- ËÆ∞ÂΩïÊ†∏ÂøÉ‰∏öÂä°ÂáΩÊï∞‰∏éËÆ°ÁÆóÈÄªËæë

---

## Ê®°ÂùóËÅåË¥£

**func** Ê®°ÂùóÊòØÁ≥ªÁªüÁöÑÊ†∏ÂøÉ‰∏öÂä°ÂáΩÊï∞Â∫ìÔºåÂåÖÂê´Ôºö
1. ÂΩ©Á•®ÂºÄÂ•ñËÆ°ÁÆóÈÄªËæëÔºàÂÖ≠ÂêàÂΩ©„ÄÅÊó∂Êó∂ÂΩ©„ÄÅÂø´3 Á≠âÔºâ
2. ÊäïÊ≥®ËÆ¢ÂçïÂ§ÑÁêÜÔºà‰∏ãÊ≥®„ÄÅÊí§Âçï„ÄÅ‰∏≠Â•ñËÆ°ÁÆóÔºâ
3. Áî®Êà∑ÊùÉÈôê‰∏éËµîÁéáËÆ°ÁÆó
4. Êä•Ë°®ÁªüËÆ°ÂáΩÊï∞
5. Êï∞ÊçÆÈ™åËØÅ‰∏éÊ†ºÂºèÂåñ
6. ÊêúÁ¥¢‰∏éÂàÜÈ°µ

---

## ÂÖ•Âè£‰∏éÂêØÂä®

**Êú¨Ê®°Âùó‰∏∫ÂáΩÊï∞Â∫ì**ÔºåÊó†Áã¨Á´ãÂÖ•Âè£ÔºåÈÄöËøá `include` ÂºïÂÖ•Âà∞ÂÖ∂‰ªñÊ®°ÂùóÔºö

```php
include('../func/func.php');        // ÈÄöÁî®ÂáΩÊï∞Â∫ì
include('../func/csfunc.php');      // ÂΩ©Á•®‰∏öÂä°ÂáΩÊï∞
include('../func/userfunc.php');    // Áî®Êà∑Áõ∏ÂÖ≥ÂáΩÊï∞
include('../func/adminfunc.php');   // ÁÆ°ÁêÜÂëòÂáΩÊï∞
include('../func/agentfunc.php');   // ‰ª£ÁêÜÂïÜÂáΩÊï∞
include('../func/malhc.php');       // ÂÖ≠ÂêàÂΩ©ÂºÄÂ•ñËÆ°ÁÆó
```

---

## ÂØπÂ§ñÊé•Âè£

### Ê†∏ÂøÉÂáΩÊï∞ÂàÜÁ±ª

#### 1. ÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞Ôºàfunc.phpÔºâ

| ÂáΩÊï∞Âêç | ÂèÇÊï∞ | ËøîÂõûÂÄº | ÊèèËø∞ |
|--------|------|--------|------|
| `rdates($v)` | Êó•ÊúüÂ≠óÁ¨¶‰∏≤ | Êó•Êúü | È™åËØÅÂπ∂Ê†ºÂºèÂåñÊó•Êúü |
| `sqltime($v)` | Êó∂Èó¥Êà≥ | Y-m-d H:i:s | ËΩ¨Êç¢‰∏∫ SQL Êó∂Èó¥Ê†ºÂºè |
| `sqldate($v)` | Êó∂Èó¥Êà≥ | Y-m-d | ËΩ¨Êç¢‰∏∫ SQL Êó•ÊúüÊ†ºÂºè |
| `checkid($v)` | ID | bool | È™åËØÅ 8 ‰ΩçÊï∞Â≠ó ID |
| `r0p($v)` | Êï∞Â≠ó | Êï∞Â≠ó | ÂõõËàç‰∫îÂÖ•Âà∞Êï¥Êï∞ |
| `p1($v)` | Êï∞Â≠ó | Êï∞Â≠ó | ‰øùÁïô 1 ‰ΩçÂ∞èÊï∞ |
| `p2($v)` | Êï∞Â≠ó | Êï∞Â≠ó | ‰øùÁïô 2 ‰ΩçÂ∞èÊï∞ |
| `setupid3($tb,$field)` | Ë°®Âêç„ÄÅÂ≠óÊÆµ | int | Ëá™Â¢û ID ÁîüÊàêÂô® |

#### 2. ÂΩ©Á•®‰∏öÂä°ÂáΩÊï∞Ôºàcsfunc.phpÔºâ

| ÂáΩÊï∞Âêç | ÂèÇÊï∞ | ËøîÂõûÂÄº | ÊèèËø∞ |
|--------|------|--------|------|
| `getgame()` | Êó† | array | Ëé∑ÂèñÊâÄÊúâÊ∏∏ÊàèÈÖçÁΩÆ |
| `getb()` | Êó† | array | Ëé∑ÂèñÊâÄÊúâÂ§ßÁõòÔºà‰∏ÄÁ∫ßÂàÜÁ±ªÔºâ |
| `gets($bid)` | Â§ßÁõò ID | array | Ëé∑ÂèñÂ≠êÁõòÔºà‰∫åÁ∫ßÂàÜÁ±ªÔºâ |
| `getc($bid,$sid)` | Â§ßÁõò„ÄÅÂ≠êÁõò | array | Ëé∑ÂèñÁé©Ê≥ïÔºà‰∏âÁ∫ßÂàÜÁ±ªÔºâ |
| `getp107(...)` | Â§öÂèÇÊï∞ | array | Ëé∑ÂèñÁâπÂÆöÁé©Ê≥ïÁöÑËµîÁéá |
| `setuptid()` | Êó† | string | ÁîüÊàêËÆ¢Âçï IDÔºà8 ‰ΩçÊï∞Â≠óÔºâ |
| `getuserpeilvcha($uid,$class)` | Áî®Êà∑ ID„ÄÅÁé©Ê≥ï | float | Ëé∑ÂèñÁî®Êà∑ËµîÁéáÂ∑ÆÔºà‰ª£ÁêÜÂàÜÊàêÔºâ |

#### 3. ÂÖ≠ÂêàÂΩ©ËÆ°ÁÆóÂáΩÊï∞Ôºàmalhc.phpÔºâ

| ÂáΩÊï∞Âêç | ÂèÇÊï∞ | ËøîÂõûÂÄº | ÊèèËø∞ |
|--------|------|--------|------|
| `shengxiao($ma,$bml)` | Âè∑Á†Å„ÄÅÊ≥¢Ëâ≤Ë°® | string | ËÆ°ÁÆóÁîüËÇñ |
| `wuhang($ma,$bml)` | Âè∑Á†Å„ÄÅÊ≥¢Ëâ≤Ë°® | string | ËÆ°ÁÆó‰∫îË°å |
| `lhds($tm)` | Âè∑Á†Å | string | Âà§Êñ≠Â§ßÂ∞èÔºàÂ§ß>=25Ôºâ |
| `lhdx($tm)` | Âè∑Á†Å | string | Âà§Êñ≠ÂçïÂèå |
| `sanhex($tm,$bml)` | Âè∑Á†Å„ÄÅÊ≥¢Ëâ≤ | array | ‰∏âÂêàËÇñËÆ°ÁÆó |
| `liuhex($tm,$bml)` | Âè∑Á†Å„ÄÅÊ≥¢Ëâ≤ | array | ÂÖ≠ÂêàËÇñËÆ°ÁÆó |
| `rbose($tm)` | Âè∑Á†Å | string | ËÆ°ÁÆóÊ≥¢Ëâ≤ÔºàÁ∫¢/Ëìù/ÁªøÔºâ |

#### 4. Áî®Êà∑ÂáΩÊï∞Ôºàuserfunc.phpÔºâ

ÔºàÊ†πÊçÆ‰ª£Á†ÅÊé®ÊµãÔºåÊú™ÂÆåÂÖ®Êâ´ÊèèÂà∞Ôºâ
- Áî®Êà∑ÁôªÂΩïÈ™åËØÅ
- Áî®Êà∑‰ΩôÈ¢ùÊü•ËØ¢
- Áî®Êà∑ÊäïÊ≥®ÊùÉÈôêÊ£ÄÊü•

#### 5. ÁÆ°ÁêÜÂëòÂáΩÊï∞Ôºàadminfunc.phpÔºâ

ÔºàÊ†πÊçÆ‰ª£Á†ÅÊé®ÊµãÔºåÊú™ÂÆåÂÖ®Êâ´ÊèèÂà∞Ôºâ
- ÁÆ°ÁêÜÂëòÊùÉÈôêÈ™åËØÅ
- Êìç‰ΩúÊó•ÂøóËÆ∞ÂΩï

---

## ÂÖ≥ÈîÆ‰æùËµñ‰∏éÈÖçÁΩÆ

### ‰æùËµñÊñá‰ª∂

```php
// ÈÄöÂ∏∏Âú®ÂáΩÊï∞Êñá‰ª∂ÂÜÖÈÉ®ÂºïÁî®
global $msql, $psql;  // Êï∞ÊçÆÂ∫ìËøûÊé•ÂØπË±°
global $tb_user, $tb_order, $tb_kj;  // Ë°®ÂêçÂèòÈáè
```

### ÂÖ®Â±ÄÂèòÈáè

ÂáΩÊï∞Â∫ì‰æùËµñ‰ª•‰∏ãÂÖ®Â±ÄÂèòÈáèÔºàÂÆö‰πâÂú® `data/db.php`ÔºâÔºö
- `$tb_user` - Áî®Êà∑Ë°®Âêç
- `$tb_lib` - ÊäïÊ≥®ËÆ∞ÂΩïË°®Âêç
- `$tb_kj` - ÂºÄÂ•ñËÆ∞ÂΩïË°®Âêç
- `$tb_class` - Áé©Ê≥ïÂàÜÁ±ªË°®Âêç
- `$tb_play` - Áé©Ê≥ïËµîÁéáË°®Âêç

---

## Êï∞ÊçÆÊ®°Âûã

### ÂÖ≥ËÅîÊï∞ÊçÆË°®

| Ë°®Âêç | Áî®ÈÄî | ÂÖ≥ÈîÆÂ≠óÊÆµ |
|------|------|---------|
| `x_game` | Ê∏∏ÊàèÈÖçÁΩÆ | `gid`, `gname`, `status` |
| `x_bclass` | Â§ßÁõòÂàÜÁ±ª | `bid`, `bname` |
| `x_class` | Â≠êÁõòÂàÜÁ±ª | `sid`, `sname`, `bid` |
| `x_play` | Áé©Ê≥ïËµîÁéá | `pid`, `pname`, `peilv1`, `peilv2` |
| `x_kj` | ÂºÄÂ•ñËÆ∞ÂΩï | `qishu`, `kj1-kj8`, `dates` |
| `x_lib` | ÊäïÊ≥®ËÆ∞ÂΩï | `tid`, `userid`, `points`, `prize`, `z` |

### ÂºÄÂ•ñËÆ°ÁÆóÈÄªËæëÔºàÂÖ≠ÂêàÂΩ©Á§∫‰æãÔºâ

```php
// ‰º™‰ª£Á†ÅÁ§∫‰æã
$kj = [12, 23, 34, 45, 01, 18, 49];  // 7 ‰∏™ÂºÄÂ•ñÂè∑Á†Å
$tm = $kj[6];  // ÁâπÁ†ÅÔºàÊúÄÂêé‰∏Ä‰∏™Âè∑Á†ÅÔºâ

// ËÆ°ÁÆóÁîüËÇñ
$sx = shengxiao($tm, $bml);  // Ê†πÊçÆÁîüËÇñÂØπÁÖßË°®ËÆ°ÁÆó

// ËÆ°ÁÆóÂ§ßÂ∞è
$dx = lhdx($tm);  // Â§ß>=25, Â∞è<25

// ËÆ°ÁÆóÂçïÂèå
$ds = lhds($tm);  // ÂçïÊï∞/ÂèåÊï∞

// ËÆ°ÁÆóÊ≥¢Ëâ≤
$bs = rbose($tm);  // Á∫¢/Ëìù/Áªø
```

---

## ÊµãËØï‰∏éË¥®Èáè

### ÂΩìÂâçÊµãËØïË¶ÜÁõñ

‚ùå Êó†Ëá™Âä®ÂåñÊµãËØï

### Êé®ËçêÊµãËØïÁî®‰æã

#### ÊµãËØï `shengxiao()` ÂáΩÊï∞

```php
// ÊµãËØïÁî®‰æã 1ÔºöÂè∑Á†Å 12 Â∫îËØ•ËøîÂõû "Èº†"
assert(shengxiao(12, $bml) == "Èº†");

// ÊµãËØïÁî®‰æã 2ÔºöÂè∑Á†Å 49 Â∫îËØ•ËøîÂõû "Áâõ"
assert(shengxiao(49, $bml) == "Áâõ");
```

#### ÊµãËØï `lhdx()` ÂáΩÊï∞

```php
// ÊµãËØïÁî®‰æã 1ÔºöÂè∑Á†Å 25 Â∫îËØ•ËøîÂõû "Â§ß"
assert(lhdx(25) == "Â§ß");

// ÊµãËØïÁî®‰æã 2ÔºöÂè∑Á†Å 24 Â∫îËØ•ËøîÂõû "Â∞è"
assert(lhdx(24) == "Â∞è");
```

### Â∑≤Áü•ÈóÆÈ¢ò

1. **Áº∫Â∞ëËæìÂÖ•È™åËØÅ**Ôºö
   - ÈÉ®ÂàÜÂáΩÊï∞Êú™È™åËØÅÂèÇÊï∞Á±ªÂûãÔºàÂ¶Ç `checkid()` ÂèØËÉΩÊé•Êî∂ÈùûÊï∞Â≠óÔºâ

2. **Á°¨ÁºñÁ†ÅÈÄªËæë**Ôºö
   - ÁîüËÇñ„ÄÅÊ≥¢Ëâ≤ÂØπÁÖßË°®ÂÜôÊ≠ªÂú®‰ª£Á†Å‰∏≠ÔºàÂ∫îËØ•Â≠òÂÇ®Âú®Êï∞ÊçÆÂ∫ìÔºâ

3. **ÊÄßËÉΩÈóÆÈ¢ò**Ôºö
   - È¢ëÁπÅÁöÑÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÔºàÂ∫îËØ•ÁºìÂ≠òÁé©Ê≥ïÈÖçÁΩÆÔºâ

---

## Â∏∏ËßÅÈóÆÈ¢ò (FAQ)

### Q1ÔºöÂ¶Ç‰Ωï‰øÆÊîπËµîÁéáÔºü
AÔºö‰øÆÊîπ `x_play` Ë°®ÁöÑ `peilv1`ÔºàÊôÆÈÄöÁî®Êà∑ËµîÁéáÔºâÂíå `peilv2`Ôºà‰ª£ÁêÜËµîÁéáÔºâÂ≠óÊÆµ

### Q2ÔºöÂ¶Ç‰ΩïÊ∑ªÂä†Êñ∞Áé©Ê≥ïÔºü
AÔºö
1. Âú® `x_class` Ë°®Ê∑ªÂä†Áé©Ê≥ïËÆ∞ÂΩï
2. Âú® `x_play` Ë°®Ê∑ªÂä†ÂØπÂ∫îËµîÁéá
3. Âú® `csfunc.php` Ê∑ªÂä†ÂØπÂ∫îÁöÑ `getp*()` ÂáΩÊï∞

### Q3ÔºöÂºÄÂ•ñËÆ°ÁÆóÈîôËØØÊÄé‰πàÂäûÔºü
AÔºöÊ£ÄÊü• `malhc.php` ‰∏≠ÁöÑÊ≥¢Ëâ≤ÂØπÁÖßË°®Ôºà`$bml` ÂèòÈáèÔºâÊòØÂê¶Ê≠£Á°Æ

---

## Áõ∏ÂÖ≥Êñá‰ª∂Ê∏ÖÂçï

### Ê†∏ÂøÉÂáΩÊï∞Êñá‰ª∂

- `func.php` - ÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞ÔºàÁ∫¶ 1800 Ë°åÔºâ
- `csfunc.php` - ÂΩ©Á•®‰∏öÂä°ÂáΩÊï∞ÔºàÁ∫¶ 1000 Ë°åÔºâ
- `userfunc.php` - Áî®Êà∑ÂáΩÊï∞
- `adminfunc.php` - ÁÆ°ÁêÜÂëòÂáΩÊï∞
- `agentfunc.php` - ‰ª£ÁêÜÂïÜÂáΩÊï∞
- `malhc.php` - ÂÖ≠ÂêàÂΩ©ËÆ°ÁÆóÈÄªËæëÔºàÁ∫¶ 500 Ë°åÔºâ
- `long.php` - ÈæôËôéÊñóÁé©Ê≥ïÈÄªËæë
- `longsm.php` - ÈæôËôéÊñóÔºà‰∏âÈù¢ÔºâÈÄªËæë
- `jsfunc.php` - JavaScript Áõ∏ÂÖ≥ÂáΩÊï∞
- `search.php` - ÊêúÁ¥¢ÂáΩÊï∞
- `searchnew.php` - Êñ∞ÁâàÊêúÁ¥¢ÂáΩÊï∞

---

## ‰∏ã‰∏ÄÊ≠•‰ºòÂåñÂª∫ËÆÆ

### È´ò‰ºòÂÖàÁ∫ß
1. üß™ ‰∏∫Ê†∏ÂøÉËÆ°ÁÆóÂáΩÊï∞ÁºñÂÜôÂçïÂÖÉÊµãËØïÔºàPHPUnitÔºâ
2. üìù ‰∏∫ÊØè‰∏™ÂáΩÊï∞Ê∑ªÂä† PHPDoc Ê≥®Èáä
3. ‚úÖ Â¢ûÂä†ËæìÂÖ•È™åËØÅÔºàÈò≤Ê≠¢ÈùûÊ≥ïÂèÇÊï∞Ôºâ

### ‰∏≠‰ºòÂÖàÁ∫ß
1. üöÄ ÂºïÂÖ•ÁºìÂ≠òÊú∫Âà∂ÔºàRedisÔºâÁºìÂ≠òÁé©Ê≥ïÈÖçÁΩÆ
2. üîß ÈáçÊûÑË∂ÖÈïøÂáΩÊï∞ÔºàÊãÜÂàÜ‰∏∫Â§ö‰∏™Â≠êÂáΩÊï∞Ôºâ
3. üìä ‰ºòÂåñÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÔºàÂáèÂ∞ëÈáçÂ§çÊü•ËØ¢Ôºâ

### ‰Ωé‰ºòÂÖàÁ∫ß
1. üõ†Ô∏è Â∞ÜÁîüËÇñ„ÄÅÊ≥¢Ëâ≤ÂØπÁÖßË°®ÁßªÂà∞Êï∞ÊçÆÂ∫ì
2. üì¶ Â∞ÅË£Ö‰∏∫Áã¨Á´ãÁöÑÁ±ªÔºàÈù¢ÂêëÂØπË±°ÊîπÈÄ†Ôºâ

---

**Ê®°ÂùóÁâàÊú¨**Ôºöv1.0
**ÊñáÊ°£ÁîüÊàê**ÔºöClaude AI
**ÊúÄÂêéÊõ¥Êñ∞**Ôºö2025-11-09 14:50:39
